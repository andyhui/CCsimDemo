cscope 15 $HOME/software/posture_team/projects/CCSimDemo               0000060517
	@BEcharToDouble.cpp

1 
	~<m©h.h
>

2 
	~"mašwšdow.h
"

4 
	gMašWšdow
::
	$BštToCh¬
(
š‹r
, 
buf
[])

6 
i
 = 0;

7 
i
 = 3; i >= 0; i--)

9 
buf
[
i
] = 
š‹r
 & 0xff;

10 
š‹r
 >>= 8;

12 
	}
}

15 
	gMašWšdow
::
	$BEch¬TOdoubË
(
buf
[])

17 
m
;

18 
sign
 = 0;

21 
a
 = (
buf
[0]&0x80)>>7;

22 if(
a
 == 0)

24 
sign
 = 1;

26 if(
a
 == 1)

28 
sign
 = -1;

32 
E
 = ((
buf
[0]&0x7F)<<4)+((buf[1]&0xF0)>>4)-1023;

35 
M
 = ((
buf
[1]&0x0F)*
	`pow”
(2,48))+(buf[2]*power(2,40))+\

36 (
buf
[3]*
	`pow”
(2,32))+(buf[4]*power(2,24))+\

37 (
buf
[5]*
	`pow”
(2,16))+(buf[6]*power(2,8))+buf[7];

40 
m
 = 
sign
*(1+
M
*
	`pow”
(2,-52))*pow”(2,
E
);

41  
m
;

42 
	}
}

44 
	gMašWšdow
::
	$pow”
(
x
 ,
n
)

46 
i
;

47 
p
 = 1;

48 
i
=1; i<=
	`abs
(
n
); i++)

50 
p
 =…*
x
;

53 if(
n
<0)

55 
p
 = 1.0/p;

57  
p
;

58 
	}
}

	@IpToChar.cpp

2 
	~"mašwšdow.h
"

5 
	gMašWšdow
::
	$IpToCh¬
(*
šBufãr
, 
Ën
, *
outBufãr
)

7 * 
pCur
 = 
šBufãr
;

8 
pA¼
[4] = {0};

9 
i
 = 0;

10 
k
 = 0;

11 
pA¼
[
i
] = 
	`©oi
(
pCur
);

13 
k
++ < 
Ën
)

15 if(*
pCur
 == '.')

17 
pA¼
[++
i
] = 
	`©oi
(
pCur
 + 1);

19 
pCur
++;

22  
i
 = 0; i < 4; i ++)

24 
outBufãr
[
i
*3+0] = 
pA¼
[i]/100 + 48;

25 
outBufãr
[
i
*3+1] = 
pA¼
[i]%100/10 + 48;

26 
outBufãr
[
i
*3+2] = 
pA¼
[i]%10 + 48;

28 
	}
}

	@RealNode_Qt/Message.cpp

1 
	~"Mes§ge.h
"

3 
	gMes§ge
::
	$Mes§ge
()

5 
QBy‹A¼ay
 
	`‹mpbA¼ay
(32,'h');

6 
this
->
vœtu®H—d”
 = 
‹mpbA¼ay
;

7 
this
->
Ëngth
 = 0;

8 
this
->
mes§geTy³
 = 0;

9 
this
->
cÜdTy³
 = 0;

10 
	}
}

12 
	gMes§ge
::
	$£tH—d”
(
QBy‹A¼ay
 
h—d”
)

14 
this
->
vœtu®H—d”
 = 
h—d”
;

15 
	}
}

17 
QBy‹A¼ay
 
	gMes§ge
::
	$g‘H—d”
()

19  
this
->
vœtu®H—d”
;

20 
	}
}

21 
	gMes§ge
::
	$£tL’gth
(
qušt8
 
Ën
)

23 
this
->
Ëngth
 = 
Ën
;

24 
	}
}

25 
qušt8
 
	gMes§ge
::
	$g‘L’gth
()

27  
this
->
Ëngth
;

28 
	}
}

29 
	gMes§ge
::
	$£tMes§geTy³
(
qušt16
 
msgTy³
)

31 
this
->
mes§geTy³
 = 
msgTy³
;

32 
	}
}

33 
qušt16
 
	gMes§ge
::
	$g‘Mes§geTy³
()

35  
this
->
mes§geTy³
;

36 
	}
}

37 
	gMes§ge
::
	$£tCÜdTy³
(
qušt8
 
cÜdTy³
)

39 
this
->
cÜdTy³
 = cordType;

40 
	}
}

41 
qušt8
 
	gMes§ge
::
	$g‘CÜdTy³
()

43  
this
->
cÜdTy³
;

44 
	}
}

	@RealNode_Qt/Message.h

1 #iâdeà
DATAGRAM_H


2 
	#DATAGRAM_H


	)

4 
	~<QtGlob®
>

5 
	~<QBy‹A¼ay
>

7 şas 
	cMes§ge


10 
	m´iv©e
:

11 
QBy‹A¼ay
 
vœtu®H—d”
;

12 
qušt8
 
	mËngth
;

13 
qušt16
 
	mmes§geTy³
;

14 
qušt8
 
	mcÜdTy³
;

16 
	mpublic
:

17 
Mes§ge
();

18 
£tH—d”
(
QBy‹A¼ay
 
h—d”
);

19 
QBy‹A¼ay
 
g‘H—d”
();

20 
£tL’gth
(
qušt8
 
Ën
);

21 
qušt8
 
g‘L’gth
();

22 
£tMes§geTy³
(
qušt16
 
msgTy³
);

23 
qušt16
 
g‘Mes§geTy³
();

24 
£tCÜdTy³
(
qušt8
 
cÜdTy³
);

25 
qušt8
 
g‘CÜdTy³
();

	@RealNode_Qt/Position.cpp

1 
	~"Pos™iÚ.h
"

3 
	gPos™iÚ
::
	$Pos™iÚ
()

5 
this
->
xcÜd
 = 0.0;

6 
this
->
ycÜd
 = 0.0;

7 
this
->
zcÜd
 = 0.0;

8 
	}
}

10 
	gPos™iÚ
::
	$£tXcÜd
(
x
)

12 
this
->
xcÜd
 = 
x
;

13 
	}
}

15 
	gPos™iÚ
::
	$£tYcÜd
(
y
)

17 
this
->
ycÜd
 = 
y
;

18 
	}
}

19 
	gPos™iÚ
::
	$£tZcÜd
(
z
)

21 
this
->
zcÜd
 = 
z
;

22 
	}
}

23 
	gPos™iÚ
::
	$g‘XcÜd
()

25  
this
->
xcÜd
;

26 
	}
}

27 
	gPos™iÚ
::
	$g‘YcÜd
()

29  
this
->
ycÜd
;

30 
	}
}

31 
	gPos™iÚ
::
	$g‘ZcÜd
()

33  
this
->
zcÜd
;

34 
	}
}

37 
QSŒšg
 
	gPos™iÚ
::
	$toSŒšg
()

39  
QSŒšg
::
	`numb”
(
this
->
	`g‘XcÜd
())+","+

40 
QSŒšg
::
	`numb”
(
this
->
	`g‘YcÜd
())+","+

41 
QSŒšg
::
	`numb”
(
this
->
	`g‘ZcÜd
());

43 
	}
}

	@RealNode_Qt/Position.h

1 #iâdeà
POSTION_H


2 
	#POSTION_H


	)

4 
	#AREA_MAX
 1500.0

	)

5 
	#AREA_MIN
 0.0

	)

6 
	#MOVE_STEP
 30.0

	)

8 
	~<QtGlob®
>

9 
	~<QTime
>

10 
	~<m©h.h
>

13 şas 
	cPos™iÚ
{

15 
	m´iv©e
:

16 
xcÜd
;

17 
	mycÜd
;

18 
	mzcÜd
;

21 
	mpublic
:

22 
Pos™iÚ
();

23 
£tXcÜd
(
x
);

24 
£tYcÜd
(
y
);

25 
£tZcÜd
(
z
);

26 
g‘XcÜd
();

27 
g‘YcÜd
();

28 
g‘ZcÜd
();

29 
QSŒšg
 
toSŒšg
();

	@RealNode_Qt/RealNode.cpp

1 
	~"R—lNode.h
"

2 
	~"QAµliÿtiÚ
"

4 
	gR—lNode
::
R—lNode
(
QWidg‘
 *
·»Á
,
Qt
::
WšdowFÏgs
 
f
è: 
	$QDŸlog
(
·»Á
,
f
)

7 
	`q¤ªd
(
QTime
::
	`cu¼’tTime
().
	`£cÚd
());

10 
	`š™R—lNode
();

13 if(!
»cvSock‘
.
	`bšd
(
RECV_BIND_PORT
))

15 
QMes§geBox
::
	`šfÜm©iÚ
(
this
,
	`Œ
("error"),tr("UDP socket bindƒrror!"));

19 
	`cÚÃù
(
this
->
pbOK
,
	`SIGNAL
(
	`şicked
()),this,
	`SLOT
(
	`okClicked
()));

20 
	`cÚÃù
(
this
->
pbRe£t
,
	`SIGNAL
(
	`şicked
()),this,
	`SLOT
(
	`»£tClicked
()));

21 
	`cÚÃù
(
this
->
pbClo£
, 
	`SIGNAL
(
	`şicked
()),his, 
	`SLOT
(
	`şo£
()));

22 
	`cÚÃù
(&
£ndTim”
, 
	`SIGNAL
(
	`timeout
()), 
this
, 
	`SLOT
(
	`£ndPos™iÚ
()));

23 
	`cÚÃù
(&
»cvSock‘
, 
	`SIGNAL
(
	`»adyR—d
()), 
this
, 
	`SLOT
(
	`hªdËCmd
()));

25 
	}
}

26 
	gR—lNode
::
	$š™R—lNode
()

29 
this
->
diff
 = 
çl£
;

30 
this
->
rcvD©ag¿m
 = "";

31 
this
->
¡rIP
 = "";

32 
this
->
¡rPÜt
 = "";

33 
this
->
pos™iÚ
 = 
Ãw
 
	`Pos™iÚ
();

34 
this
->
xsign
 = 1;

35 
this
->
ysign
 = 1;

38 
ÏbX
 = 
Ãw
 
	`QLab–
(
	`Œ
("X"));

39 
Ëd™X
 = 
Ãw
 
QLšeEd™
;

40 
ÏbY
 = 
Ãw
 
	`QLab–
(
	`Œ
("Y"));

41 
Ëd™Y
 = 
Ãw
 
QLšeEd™
;

42 
ÏbZ
 = 
Ãw
 
	`QLab–
(
	`Œ
("Z"));

43 
Ëd™Z
 = 
Ãw
 
QLšeEd™
;

44 
ÏbIP
 = 
Ãw
 
	`QLab–
(
	`Œ
("ä¸»æœºIP"));

45 
ÏbPÜt
 = 
Ãw
 
	`QLab–
(
	`Œ
("ç«¯å£å·"));

46 
Ëd™Ip
 = 
Ãw
 
QLšeEd™
;

47 
Ëd™PÜt
 = 
Ãw
 
QLšeEd™
;

48 
pbOK
 = 
Ãw
 
	`QPushBu‰Ú
(
	`Œ
("å¼€å§‹"));

49 
pbRe£t
 = 
Ãw
 
	`QPushBu‰Ú
(
	`Œ
("åœæ­¢"));

50 
pbClo£
 = 
Ãw
 
	`QPushBu‰Ú
(
	`Œ
("é€€å‡º"));

51 
‹xtEd™Cmd
 = 
Ãw
 
	`QTextEd™
();

53 
QGridLayout
* 
gridÏyoutUDP
 = 
Ãw
 
	`QGridLayout
();

54 
gridÏyoutUDP
->
	`addWidg‘
(
ÏbIP
,0,0);

55 
gridÏyoutUDP
->
	`addWidg‘
(
Ëd™Ip
,0,1);

56 
gridÏyoutUDP
->
	`addWidg‘
(
ÏbPÜt
,1,0);

57 
gridÏyoutUDP
->
	`addWidg‘
(
Ëd™PÜt
,1,1);

59 
QGridLayout
* 
gridÏyoutPos™iÚ
 = 
Ãw
 
	`QGridLayout
();

60 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
ÏbX
,0,0);

61 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
Ëd™X
,0,1);

62 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
ÏbY
,1,0);

63 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
Ëd™Y
,1,1);

64 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
ÏbZ
,2,0);

65 
gridÏyoutPos™iÚ
->
	`addWidg‘
(
Ëd™Z
,2,1);

67 
QGroupBox
* 
groupBoxUDP
 = 
Ãw
 
	`QGroupBox
(
	`Œ
("UDPé…ç½®"));

68 
QGroupBox
* 
groupBoxPos™iÚ
 = 
Ãw
 
	`QGroupBox
(
	`Œ
("åˆå§‹åŒ–åæ ‡ä½ç½®"));

70 
groupBoxUDP
->
	`£tLayout
(
gridÏyoutUDP
);

71 
groupBoxPos™iÚ
->
	`£tLayout
(
gridÏyoutPos™iÚ
);

73 
QGridLayout
* 
gridÏyoutLeá
 = 
Ãw
 
	`QGridLayout
();

74 
gridÏyoutLeá
->
	`addWidg‘
(
groupBoxUDP
,0,0);

75 
gridÏyoutLeá
->
	`addWidg‘
(
groupBoxPos™iÚ
,1,0);

76 
gridÏyoutLeá
->
	`addWidg‘
(
pbOK
,2,0);

77 
gridÏyoutLeá
->
	`addWidg‘
(
pbRe£t
,3,0);

78 
gridÏyoutLeá
->
	`addWidg‘
(
pbClo£
,4,0);

80 
QGridLayout
* 
mašLayout
 = 
Ãw
 
	`QGridLayout
(
this
);

81 
mašLayout
->
	`addLayout
(
gridÏyoutLeá
,0,0);

82 
mašLayout
->
	`addWidg‘
(
‹xtEd™Cmd
,0,1);

84 
	`£tWšdowT™Ë
(
QObjeù
::
	`Œ
("æŒ‡æ§ä»¿çœŸå¹³å°-çœŸå®èŠ‚ç‚¹å®¢æˆ·ç«¯"));

85 
this
->
	`£tMaximumSize
(600,1000);

87 
	}
}

90 
	gR—lNode
::
	$£ndPos™iÚ
()

93 
QBy‹A¼ay
 
	`d©ag¿m
("");

94 
QD©aSŒ—m
 
	`out
(&
d©ag¿m
, 
QIODeviû
::
Wr™eOÆy
);

95 
out
.
	`£tV”siÚ
(
QD©aSŒ—m
::
Qt_4_8
);

98 
Mes§ge
 *
msg
 = 
Ãw
 
	`Mes§ge
();

99 
msg
->
	`£tMes§geTy³
(0x01);

101 
msg
->
	`£tCÜdTy³
(0x01);

102 
msg
->
	`£tL’gth
(27);

103 
out
 << 
msg
->
	`g‘H—d”
()<< msg->
	`g‘L’gth
(è<< msg->
	`g‘Mes§geTy³
()

104 << 
msg
->
	`g‘CÜdTy³
(è<< 
this
->
pos™iÚ
->
	`g‘XcÜd
()

105 << 
this
->
pos™iÚ
->
	`g‘YcÜd
(è<<his->pos™iÚ->
	`g‘ZcÜd
();

108 if(
NULL
!=
this
->
¡rIP
 || NULL!ñhis->
¡rPÜt
)

111 
£ndSock‘
.
	`wr™eD©ag¿m
(
d©ag¿m
.
	`»move
(0,4),d©ag¿m.
	`size
(),

112 
	`QHo¡Add»ss
(
this
->
¡rIP
),this->
¡rPÜt
.
	`toIÁ
());

115 
this
->
‹xtEd™Cmd
->
	`­³nd
("£nd…os™iÚ("+
pos™iÚ
->
	`toSŒšg
()+

116 "ètØde¡š©iÚ "+
this
->
¡rIP
+":"+this->
¡rPÜt
);

121 
this
->
	`¿ndomPos™iÚ
Ñhis->
pos™iÚ
);

122 
	}
}

127 
	gR—lNode
::
	$hªdËCmd
()

130 
QBy‹A¼ay
 
	`šd©ag¿m
("");

131 
»cvSock‘
.
	`hasP’dšgD©ag¿ms
())

133 
šd©ag¿m
.
	`»size
(
»cvSock‘
.
	`³ndšgD©ag¿mSize
());

134 
»cvSock‘
.
	`»adD©ag¿m
(
šd©ag¿m
.
	`d©a
(),šd©ag¿m.
	`size
());

136 
QD©aSŒ—m
 
	`š
(&
šd©ag¿m
, 
QIODeviû
::
R—dOÆy
);

137 
š
.
	`£tV”siÚ
(
QD©aSŒ—m
::
Qt_4_8
);

140 
	`»¥ÚdAck
(
šd©ag¿m
);

142 
	}
}

145 
	gR—lNode
::
	$¿ndomPos™iÚ
(
Pos™iÚ
 *
pos
)

147 
vx
=0.0,
vy
=0.0,
x1
=0.0,
y1
=0.0;

150 
vx
 = ()
	`q¿nd
()/()
RAND_MAX
*
MOVE_STEP
;

151 
vy
 = ()
	`q¿nd
()/()
RAND_MAX
*
MOVE_STEP
;

155 
x1
 = 
pos
->
	`g‘XcÜd
();

156 
y1
 = 
pos
->
	`g‘YcÜd
();

159 
»sign
=2.0;

160 if(
vx
<
»sign
)

162 
this
->
xsign
 *= -1;

165 if(
vy
<
»sign
){

167 
this
->
ysign
 *= -1;

173 
maxA»a
 = 
AREA_MAX
-
MOVE_STEP
,
mšA»a
 = 
AREA_MIN
+MOVE_STEP;

174 if(
x1
>
maxA»a
)

176 
this
->
xsign
 = -1;

179 if(
y1
>
maxA»a
)

181 
this
->
ysign
 = -1;

184 if(
x1
<
mšA»a
)

186 
this
->
xsign
 = 1;

189 if(
y1
<
mšA»a
)

191 
this
->
ysign
 = 1;

194 
x1
 = x1+
this
->
xsign
*
vx
;

195 
y1
 = y1+
this
->
ysign
*
vy
;

197 
this
->
pos™iÚ
->
	`£tXcÜd
(
x1
);

198 
this
->
pos™iÚ
->
	`£tYcÜd
(
y1
);

199 
this
->
pos™iÚ
->
	`£tZcÜd
(0.0);

201 
	}
}

209 
	gR—lNode
::
	$»¥ÚdAck
(
QBy‹A¼ay
 
šd©ag¿m
)

214 if(
rcvD©ag¿m
==
šd©ag¿m
)

216 
diff
 = 
çl£
;

218 
	`cÚÃù
(&
ackTim”
, 
	`SIGNAL
(
	`timeout
()), 
this
, 
	`SLOT
(
	`’abËDiff
()));

219 
ackTim”
.
	`¡¬t
(2000);

222 
diff
 = 
Œue
;

224 
rcvD©ag¿m
 = 
šd©ag¿m
;

227 if(
diff
)

229 
boŞ
 
©ck
 = 
çl£
;

232 
d©ag¿mTy³
[2];

233 
d©ag¿mTy³
[0] = 
šd©ag¿m
.
	`©
(33);

234 
d©ag¿mTy³
[1] = 
šd©ag¿m
.
	`©
(34);

237 if(
d©ag¿mTy³
[0]==0 && datagramType[1]==17)

243 
QBy‹A¼ay
 
d©aIp
 = 
šd©ag¿m
.
	`»move
(0,35);

246 
QBy‹A¼ay
 
	`¡ªd¬dIP
("");

247 
qušt8
 
i
=0,
couÁZ”o
 = 0;

248 
i
<
d©aIp
.
	`size
())

250 if(
d©aIp
[
i
] != '0')

252 
¡ªd¬dIP
.
	`­³nd
(
d©aIp
[
i
]);

253 
k
=1;k<(3-
couÁZ”o
);k++)

255 
¡ªd¬dIP
.
	`­³nd
(
d©aIp
[
i
+
k
]);

257 if(
i
!=12)

259 
¡ªd¬dIP
.
	`­³nd
('.');

261 
i
 = i+3-
couÁZ”o
;

262 
couÁZ”o
=0;

266 
couÁZ”o
++;

267 if(
couÁZ”o
==3)

269 
¡ªd¬dIP
.
	`­³nd
(
d©aIp
[
i
]);

273 
i
++;

274 if((
i
%3 == 0) && (i!= 12))

276 
¡ªd¬dIP
.
	`­³nd
('.');

277 
couÁZ”o
 = 0;

283 
this
->
‹xtEd™Cmd
->
	`­³nd
("SucûssfuÎy‡‰ackedhnode: "+
¡ªd¬dIP
);

284 
©ck
 = 
Œue
;

288 
this
->
‹xtEd™Cmd
->
	`­³nd
("Unrecognized Instruction......");

289 
©ck
 = 
çl£
;

293 
Mes§ge
* 
msg
 = 
Ãw
 
	`Mes§ge
();

294 
msg
->
	`£tMes§geTy³
(0x81);

297 
qušt8
 
msgD©a
 = 0;

298 if(
©ck
)

300 
msgD©a
 = 0x01;

302 
msgD©a
 = 0x02;

304 
msg
->
	`£tL’gth
((msg->
	`g‘Mes§geTy³
()+1));

307 
QBy‹A¼ay
 
outd©ag¿m
;

308 
QD©aSŒ—m
 
	`out
(&
outd©ag¿m
, 
QIODeviû
::
Wr™eOÆy
);

309 
out
.
	`£tV”siÚ
(
QD©aSŒ—m
::
Qt_4_8
);

310 
out
 << 
msg
->
	`g‘H—d”
(è<< msg->
	`g‘L’gth
(è<< msg->
	`g‘Mes§geTy³
(è<< 
msgD©a
;

312 if(
this
->
¡rIP
 !ğ
NULL
 &&his->
¡rPÜt
 != NULL)

314 
£ndSock‘
.
	`wr™eD©ag¿m
(
outd©ag¿m
.
	`»move
(0,4),

315 
	`QHo¡Add»ss
(
this
->
¡rIP
),

316 
this
->
¡rPÜt
.
	`toIÁ
());

319 
	}
}

322 
	gR—lNode
::
	$okClicked
()

324 if(
NULL
==
Ëd™Ip
->
	`‹xt
(è|| NULL==
Ëd™PÜt
->text())

326 
QMes§geBox
::
	`šfÜm©iÚ
(
this
,
	`Œ
("UDPåˆå§‹åŒ–"),tr("è¯·æ­£ç¡®é…ç½®ç›®æ ‡ä¸»æœºçš„IPä¸ç«¯å£å·"));

328 
this
->
¡rIP
 = 
Ëd™Ip
->
	`‹xt
();

329 
this
->
¡rPÜt
 = 
Ëd™PÜt
->
	`‹xt
();

332 if(
NULL
==
Ëd™X
->
	`‹xt
(è|| NULL==
Ëd™Y
->‹xt()||NULL==
Ëd™Z
)

334 
QMes§geBox
::
	`šfÜm©iÚ
(
this
,
	`Œ
("åæ ‡ä½ç½®åˆå§‹åŒ–"),tr("è¯·æ­£ç¡®é…ç½®èŠ‚ç‚¹çš„åˆå§‹ä½ç½®"));

338 
this
->
pos™iÚ
->
	`£tXcÜd
(
Ëd™X
->
	`‹xt
().
	`toDoubË
(0));

339 
this
->
pos™iÚ
->
	`£tYcÜd
(
Ëd™Y
->
	`‹xt
().
	`toDoubË
(0));

340 
this
->
pos™iÚ
->
	`£tZcÜd
(
Ëd™Z
->
	`‹xt
().
	`toDoubË
(0));

342 
£ndTim”
.
	`¡¬t
(1000);

343 
	}
}

346 
	gR—lNode
::
	$»£tClicked
()

355 
£ndTim”
.
	`¡İ
();

356 
	}
}

359 
	gR—lNode
::
	$’abËDiff
()

361 
this
->
diff
 = 
Œue
;

362 
	}
}

365 
	$maš
 (
¬gc
, **
¬gv
)

367 
QAµliÿtiÚ
 
	`­p
(
¬gc
, 
¬gv
);

368 
QTextCodec
::
	`£tCodecFÜTr
(QTextCodec::
	`codecFÜName
("UTF-8"));

369 
R—lNode
 
»®node
;

370 
»®node
.
	`show
();

371  
­p
.
	`exec
();

372 
	}
}

	@RealNode_Qt/RealNode.h

1 #iâdeà
REALNODE_H


2 
	#REALNODE_H


	)

4 
	~"Pos™iÚ.h
"

5 
	~"Mes§ge.h
"

7 
	~<QtGui
>

8 
	~<QtN‘wÜk/QUdpSock‘
>

10 
	#RECV_BIND_PORT
 5555

	)

12 şas 
	cR—lNode
 : 
public
 
QDŸlog


14 
Q_OBJECT


15 
public
:

16 
R—lNode
(
QWidg‘
 *
·»Á
 = 0,
Qt
::
WšdowFÏgs
 
f
=0);

17 
š™R—lNode
();

18 
¿ndomPos™iÚ
(
Pos™iÚ
 *
pos
);

19 
»¥ÚdAck
(
QBy‹A¼ay
 
by‹A¼ay
);

22 
´iv©e
 
	m¦Ùs
:

23 
£ndPos™iÚ
();

24 
hªdËCmd
();

25 
’abËDiff
();

26 
okClicked
();

27 
»£tClicked
();

30 
	m´iv©e
:

31 
QUdpSock‘
 
£ndSock‘
;

32 
QUdpSock‘
 
	m»cvSock‘
;

34 
QTim”
 
	m£ndTim”
;

35 
QTim”
 
	mackTim”
;

36 
	mxsign
;

37 
	mysign
;

38 
Pos™iÚ
 *
	mpos™iÚ
;

39 
boŞ
 
	mdiff
;

40 
QBy‹A¼ay
 
	mrcvD©ag¿m
;

41 
QSŒšg
 
	m¡rIP
;

42 
QSŒšg
 
	m¡rPÜt
;

45 
QLab–
* 
	mÏbX
;

46 
QLab–
* 
	mÏbY
;

47 
QLab–
* 
	mÏbZ
;

48 
QLšeEd™
* 
	mËd™X
;

49 
QLšeEd™
* 
	mËd™Y
;

50 
QLšeEd™
* 
	mËd™Z
;

53 
QLab–
* 
	mÏbIP
;

54 
QLab–
* 
	mÏbPÜt
;

55 
QLšeEd™
* 
	mËd™Ip
;

56 
QLšeEd™
* 
	mËd™PÜt
;

57 
QPushBu‰Ú
* 
	mpbOK
;

58 
QPushBu‰Ú
* 
	mpbRe£t
;

59 
QPushBu‰Ú
* 
	mpbClo£
;

60 
QTextEd™
* 
	m‹xtEd™Cmd
;

	@bullet_item.cpp

1 
	~"buÎ‘_™em.h
"

2 
	~"sim_sûÃ.h
"

3 
	~"mašwšdow.h
"

5 
	gBuÎ‘I‹m
::
	$BuÎ‘I‹m
(
NodeI‹m
 *
¤c
, NodeI‹m *
de¡
)

7 
this
->
	`£tPos
(
¤c
->
	`pos
());

10 
dœeùiÚ
 = 
	`C®cuÏ‹AngË
(
¤c
->
	`pos
(), 
de¡
->pos());

13 
this
->
sourû
 = 
¤c
;

14 
this
->
de¡š©iÚ
 = 
de¡
;

17 
	`rÙ©e
(
dœeùiÚ
);

20 
tim”Id
 = 
	`¡¬tTim”
(30);

21 
	}
}

23 
QReùF
 
	gBuÎ‘I‹m
::
	$boundšgReù
() const

25  
	`QReùF
(-9.0, -6.0, 18.0, 12.0);

26 
	}
}

28 
QPaš‹rP©h
 
	gBuÎ‘I‹m
::
	$sh­e
()

30 
QPaš‹rP©h
 
·th
;

31 
·th
.
	`moveTo
(-9.0, -6.0);

32 
·th
.
	`lšeTo
(9.0, 0.0);

33 
·th
.
	`lšeTo
(-9.0, 6.0);

34 
·th
.
	`lšeTo
(-7.0, 0.0);

35 
·th
.
	`lšeTo
(-9.0, -6.0);

36  
·th
;

37 
	}
}

39 
	gBuÎ‘I‹m
::
	$·št
(
QPaš‹r
 *
·š‹r
, cÚ¡ 
QStyËO±iÚG¿phicsI‹m
 *, 
QWidg‘
 *)

41 
·š‹r
->
	`£tP’
(
Qt
::
NoP’
);

42 
·š‹r
->
	`£tBrush
(
Qt
::
bÏck
);

43 
·š‹r
->
	`d¿wP©h
(
	`sh­e
());

44 
	}
}

46 
	gBuÎ‘I‹m
::
	$tim”Ev’t
(
QTim”Ev’t
 *
ev’t
)

48 ià(
ev’t
->
	`tim”Id
(è=ğ
tim”Id
)

50 
SimSûÃ
 *
simsûÃ
 = (SimSûÃ *)(
this
->
	`sûÃ
());

52 ià(
simsûÃ
->
	`g‘BuÎ‘I‹m
(è=ğ
NULL
)

58 ià(
simsûÃ
->
	`g‘BuÎ‘I‹m
()->
	`cŞlidesW™hI‹m
(
de¡š©iÚ
))

60 
simsûÃ
->
	`»moveI‹m
(
this
);

61 
simsûÃ
->
	`£tBuÎ‘I‹m
(
NULL
);

62 
	`klTim”
(
tim”Id
);

63 
tim”Id
 = 0;

65 
MašWšdow
 *
mw
 = (MašWšdow *)(
simsûÃ
->
	`·»Á
());

67 ià(
de¡š©iÚ
->
	`judgeDamage
())

69 
mw
->
	`­³ndResuÉ
(
de¡š©iÚ
->
	`g‘IpAddr
().
	`toSŒšg
() + \

70 
	`Œ
(" è¢« "è+ 
sourû
->
	`g‘IpAddr
().
	`toSŒšg
() +r(" æ‘§æ¯ "));

71 
de¡š©iÚ
->
	`£tDamaged
();

74 
simsûÃ
->
	`£tLaunch”
(
NULL
);

75 
simsûÃ
->
	`£tT¬g‘
(
NULL
);

76 
mw
->
	`£tObjeùIp
("");

77 
mw
->
	`£tT¬g‘Ip
("");

78 
simsûÃ
->
	`upd©e
(simsûÃ->
	`v›wReù
());

83 
QPoštF
 
¡¬t
 = 
this
->
	`pos
();

84 
QPoštF
 
’d
 = 
de¡š©iÚ
->
	`pos
();

86 
	`rÙ©e
(-
dœeùiÚ
);

87 
dœeùiÚ
 = 
	`C®cuÏ‹AngË
(
¡¬t
, 
’d
);

88 
	`rÙ©e
(
dœeùiÚ
);

91 
this
->
	`£tPos
(
¡¬t
.
	`x
()+3*
	`cos
(
dœeùiÚ
*
PI
/180.0), s¹.
	`y
()+3*
	`sš
(direction*PI/180.0));

93 
	}
}

95 
	gBuÎ‘I‹m
::
	$ty³
() const

97  
U£rTy³
+2;

98 
	}
}

100 
q»®
 
	gBuÎ‘I‹m
::
	$C®cuÏ‹AngË
(
QPoštF
 
¡¬t
, QPoštF 
’d
)

102 
d–_y
 = 
¡¬t
.
	`y
()-
’d
.y();

103 
d–_x
 = 
¡¬t
.
	`x
()-
’d
.x();

105 
q»®
 
ªgË
 = 0.0;

106 ià(
d–_x
 == 0)

108 ià(
d–_y
 > 0)

110 
ªgË
 = -90.0;

114 
ªgË
 = 90.0;

117 ià(
d–_y
 == 0)

119 ià(
d–_x
 > 0)

121 
ªgË
 = 180.0;

125 
ªgË
 = 0.0;

129 
q»®
 
k
 = (q»®)
d–_y
 / (q»®)
d–_x
;

130 ià(
d–_x
 < 0)

132 
ªgË
 = 
	`©ª
(
k
)*180.0/
PI
;

134 ià(
d–_x
 > 0)

136 
ªgË
 = 
	`©ª
(
k
)*180.0/
PI
-180.0;

138  
ªgË
;

139 
	}
}

	@bullet_item.h

3 #iâdeà
BULLET_ITEM_H


4 
	#BULLET_ITEM_H


	)

6 
	~<QtGui
>

7 
	~"node_™em.h
"

9 
şass
 
	gBuÎ‘I‹m
 : 
public
 
QG¿phicsI‹m
, 
	gQObjeù


11 
	gpublic
:

12 
BuÎ‘I‹m
(
NodeI‹m
 *
¤c
, NodeI‹m *
de¡
);

15 
q»®
 
C®cuÏ‹AngË
(
QPoštF
 
¡¬t
, QPoštF 
’d
);

17 
	g´Ùeùed
:

19 
QReùF
 
boundšgReù
() const;

22 
QPaš‹rP©h
 
sh­e
();

25 
·št
(
QPaš‹r
 *, cÚ¡ 
QStyËO±iÚG¿phicsI‹m
 *, 
QWidg‘
 *);

28 
tim”Ev’t
(
QTim”Ev’t
 *
ev’t
);

31 
ty³
() const;

33 
	g´iv©e
:

34 
NodeI‹m
 *
sourû
;

35 
NodeI‹m
 *
	gde¡š©iÚ
;

36 
	gtim”Id
;

37 
q»®
 
	gdœeùiÚ
;

	@getSendMsg.cpp

1 
	~"mašwšdow.h
"

4 
qšt64
 
	gMašWšdow
::
	$g‘S’dMsg
(
£ndBufãr
[], 
QSŒšg
 
¡r
)

22 
d©aBufãr
[12];

23 
qšt64
 
size
;

26 
£ndBufãr
[1] = 5555 & 0xff;

27 
£ndBufãr
[0] = (5555 >> 8) & 0xff;

30 
£ndBufãr
[2] = 'c';

33 
MdpBufãr
[4];

34 
	`mem£t
(
MdpBufãr
,0,(MdpBuffer));

35 
	`memıy
(
£ndBufãr
+3,
MdpBufãr
,4);

38 
‹mp
 = 1;

39 
£qNoBufãr
[4];

40 
	`mem£t
(
£qNoBufãr
,0,(seqNoBuffer));

41 
	`BštToCh¬
(
‹mp
,
£qNoBufãr
);

42 
	`memıy
(
£ndBufãr
+7,
£qNoBufãr
,4);

45 
QTime
 
cu¼’t_time
 = QTime::
	`cu¼’tTime
();

46 
qušt64
 
£cÚd
 = 
cu¼’t_time
.
	`£cÚd
();

48 
i
;

49  
i
 = 18; i >= 11;i--)

51 
£ndBufãr
[
i
] = 
£cÚd
 & 0xff;

52 
£cÚd
 >>= 8;

56 
pktSize
 = 14;

57 
pktSizeBufãr
[4];

58 
	`mem£t
(
pktSizeBufãr
,0,(pktSizeBuffer));

59 
	`BštToCh¬
(
pktSize
,
pktSizeBufãr
);

60 
	`memıy
(
£ndBufãr
+19,
pktSizeBufãr
,4);

63 
qušt64
 
š‹rv®
 = 1;

64  
i
 = 30; i >= 23;i--)

66 
£ndBufãr
[
i
] = 
š‹rv®
 & 0xff;

67 
š‹rv®
 >>= 8;

70 
£ndBufãr
[32] = 14;

73 
£ndBufãr
[34] = 0x11 & 0xff;

74 
£ndBufãr
[33] =(0x11 >> 8) & 0xff;

77 * 
šBufãr
;

79 
QBy‹A¼ay
 
ba
 = 
¡r
.
	`toL©š1
();

81 
šBufãr
 = 
ba
.
	`d©a
();

84 
	`mem£t
 (
d©aBufãr
,0,(dataBuffer));

87 
	`IpToCh¬
(
šBufãr
,
	`¡¾’
(šBufãr),
d©aBufãr
);

90 
	`memıy
(
£ndBufãr
+35,
d©aBufãr
,12);

93 
size
 = 47;

96  
size
;

97 
	}
}

	@main.cpp

1 
	~"mašwšdow.h
"

3 
	$maš
 (
¬gc
, **
¬gv
)

5 
QAµliÿtiÚ
 
	`­p
(
¬gc
, 
¬gv
);

7 
QTextCodec
::
	`£tCodecFÜTr
(QTextCodec::
	`codecFÜName
("UTF-8"));

9 
MašWšdow
 
mw
;

11 
mw
.
	`show
();

19  
­p
.
	`exec
();

20 
	}
}

	@mainwindow.cpp

1 
	~"mašwšdow.h
"

3 
	gMašWšdow
::
	$MašWšdow
()

5 
	`£tWšdowT™Ë
(
	`Œ
("æŒ‡æ§ä»¿çœŸæ¼”ç¤º"));

7 
sûÃ
 = 
Ãw
 
	`SimSûÃ
("M­s/m­1.²g", 
this
);

8 
sûÃ
->
	`£tSûÃReù
(-300, -300, 600, 600);

10 
§v›w
 = 
Ãw
 
QG¿phicsV›w
;

11 
§v›w
->
	`£tSûÃ
(
sûÃ
);

12 
§v›w
->
	`£tFixedSize
(640, 640);

13 
§v›w
->
	`£tAlignm’t
(
Qt
::
AlignC’‹r
);

14 
§v›w
->
	`show
();

16 
ccObjeùLše
 = 
Ãw
 
QLšeEd™
;

17 
ccT¬g‘Lše
 = 
Ãw
 
QLšeEd™
;

18 
ccResuÉText
 = 
Ãw
 
QTextEd™
;

19 
£ndBu‰Ú
 = 
Ãw
 
	`QPushBu‰Ú
(
	`Œ
("å‘å¸ƒ"));

20 
ÿnûlBu‰Ú
 = 
Ãw
 
	`QPushBu‰Ú
(
	`Œ
("æ’¤é”€"));

22 
ccTy³Combo
 = 
Ãw
 
QComboBox
;

23 
ccTy³Combo
->
	`addI‹m
(
	`Œ
("æ”»å‡»"));

25 
ccObjeùLše
->
	`š¡®lEv’tF‹r
(
this
);

26 
ccT¬g‘Lše
->
	`š¡®lEv’tF‹r
(
this
);

27 
£ndBu‰Ú
->
	`š¡®lEv’tF‹r
(
this
);

29 
feM’u
 = 
Ãw
 
	`QM’u
(
	`Œ
("æ–‡ä»¶"));

30 
m­AùiÚ
 = 
Ãw
 
	`QAùiÚ
(
	`Œ
("é€‰æ‹©åœ°å›¾"), 
this
);

31 
´ofeAùiÚ
 = 
Ãw
 
	`QAùiÚ
(
	`Œ
("é€‰æ‹©æƒ³å®š"), 
this
);

32 
ex™AùiÚ
 = 
Ãw
 
	`QAùiÚ
(
	`Œ
("é€€å‡º"), 
this
);

35 
	`ü—‹M’us
();

38 
	`š™SûÃs
("Profiles/profile.xml");

41 
QGroupBox
 *
ccGroup
 = 
Ãw
 
	`QGroupBox
(
	`Œ
("æŒ‡æ§å‘å¸ƒ"));

42 
QGridLayout
 *
groupLayout
 = 
Ãw
 
	`QGridLayout
(
ccGroup
);

43 
groupLayout
->
	`addWidg‘
(
Ãw
 
	`QLab–
(
	`Œ
("æŒ‡æ§ç±»å‹ï¼š")), 0, 0, 1, 1);

44 
groupLayout
->
	`addWidg‘
(
ccTy³Combo
, 1, 0, 1, 2);

45 
groupLayout
->
	`addWidg‘
(
Ãw
 
	`QLab–
(
	`Œ
("æŒ‡æ§å¯¹è±¡ï¼š")), 2, 0, 1, 1);

46 
groupLayout
->
	`addWidg‘
(
ccObjeùLše
, 3, 0, 1, 2);

47 
groupLayout
->
	`addWidg‘
(
Ãw
 
	`QLab–
(
	`Œ
("æŒ‡æ§ç›®æ ‡ï¼š")), 4, 0, 1, 1);

48 
groupLayout
->
	`addWidg‘
(
ccT¬g‘Lše
, 5, 0, 1, 2);

49 
groupLayout
->
	`addWidg‘
(
ÿnûlBu‰Ú
, 6, 0, 1, 1);

50 
groupLayout
->
	`addWidg‘
(
£ndBu‰Ú
, 6, 1, 1, 1);

51 
groupLayout
->
	`addWidg‘
(
Ãw
 
	`QLab–
(
	`Œ
("æŒ‡æ§ç»“æœï¼š")), 7, 0, 1, 1);

52 
groupLayout
->
	`addWidg‘
(
ccResuÉText
, 8, 0, 1, 2);

53 
groupLayout
->
	`£tS·cšg
(15);

54 
groupLayout
->
	`£tM¬gš
(10);

56 
QHBoxLayout
 *
mašLayout
 = 
Ãw
 QHBoxLayout;

57 
mašLayout
->
	`addWidg‘
(
§v›w
, 3);

58 
mašLayout
->
	`addWidg‘
(
ccGroup
, 1);

60 
QWidg‘
 *
mašWidg‘
 = 
Ãw
 
	`QWidg‘
(
this
);

61 
	`£tC’Œ®Widg‘
(
mašWidg‘
);

63 
mašWidg‘
->
	`£tLayout
(
mašLayout
);

66 
»cvSock‘
.
	`bšd
(5824);

68 
	`cÚÃù
(
£ndBu‰Ú
, 
	`SIGNAL
(
	`şicked
()), 
this
, 
	`SLOT
(
	`£ndMsg
()));

69 
	`cÚÃù
(
ÿnûlBu‰Ú
, 
	`SIGNAL
(
	`şicked
()), 
this
, 
	`SLOT
(
	`ÿnûlS–eùiÚ
()));

70 
	`cÚÃù
(&
»cvSock‘
, 
	`SIGNAL
(
	`»adyR—d
()), 
this
, 
	`SLOT
(
	`»c›veMsg
()));

71 
	`cÚÃù
(&
£ndTim”
, 
	`SIGNAL
(
	`timeout
()), 
this
, 
	`SLOT
(
	`checkS’d
()));

73 
cmdR‘
 = 
çl£
;

74 
	}
}

76 
	gMašWšdow
::~
	$MašWšdow
()

79 
	}
}

81 
MašWšdow
::
	$£tObjeùIp
(
QSŒšg
 
s
)

83 
ccObjeùLše
->
	`£tText
(
s
);

84 
	}
}

86 
	gMašWšdow
::
	$£tT¬g‘Ip
(
QSŒšg
 
s
)

88 
ccT¬g‘Lše
->
	`£tText
(
s
);

89 
	}
}

91 
	gMašWšdow
::
	$ü—‹M’us
()

93 
	`m’uB¬
()->
	`addM’u
(
feM’u
);

95 
feM’u
->
	`addAùiÚ
(
m­AùiÚ
);

96 
	`cÚÃù
(
m­AùiÚ
, 
	`SIGNAL
(
	`Œigg”ed
()), 
this
, 
	`SLOT
(
	`¦ÙM­
()));

98 
feM’u
->
	`addAùiÚ
(
´ofeAùiÚ
);

99 
	`cÚÃù
(
´ofeAùiÚ
, 
	`SIGNAL
(
	`Œigg”ed
()), 
this
, 
	`SLOT
(
	`¦ÙProfe
()));

101 
feM’u
->
	`addAùiÚ
(
ex™AùiÚ
);

102 
	`cÚÃù
(
ex™AùiÚ
, 
	`SIGNAL
(
	`Œigg”ed
()), 
this
, 
	`SLOT
(
	`¦ÙEx™
()));

103 
	}
}

105 
	gMašWšdow
::
	$¦ÙM­
()

107 
QSŒšg
 
s
 = 
QFeDŸlog
::
	`g‘O³nFeName
(
this
, 
	`Œ
("é€‰æ‹©åœ°å›¾æ–‡ä»¶"), "./Maps", \

109 ià(
s
 !ğ
NULL
){

110 
sûÃ
->
	`£tBgP©h
(
s
);

111 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

113 
	}
}

115 
	gMašWšdow
::
	$¦ÙProfe
()

117 
QSŒšg
 
s
 = 
QFeDŸlog
::
	`g‘O³nFeName
(
this
, 
	`Œ
("é€‰æ‹©æƒ³å®šæ–‡ä»¶"), "./Profiles", \

119 
	`š™SûÃs
(
s
);

120 
	}
}

122 
	gMašWšdow
::
	$¦ÙEx™
()

124 
this
->
	`şo£
();

125 
	}
}

127 
	gMašWšdow
::
	$£ndMisse
()

129 
NodeI‹m
 *
¤c
 = 
sûÃ
->
	`g‘Launch”
();

130 
NodeI‹m
 *
de¡
 = 
sûÃ
->
	`g‘T¬g‘
();

132 ià(
¤c
 !ğ
NULL
 && 
de¡
 != NULL)

134 ià(
sûÃ
->
	`g‘BuÎ‘I‹m
(è!ğ
NULL
)

140 
sûÃ
->
	`£tLaunch”
(
¤c
);

141 
sûÃ
->
	`£tT¬g‘
(
de¡
);

142 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

143 
BuÎ‘I‹m
 *
buÎ‘
 = 
Ãw
 
	`BuÎ‘I‹m
(
¤c
, 
de¡
);

144 
sûÃ
->
	`addI‹m
(
buÎ‘
);

145 
sûÃ
->
	`£tBuÎ‘I‹m
(
buÎ‘
);

147 
ccResuÉText
->
	`­³nd
(
¤c
->
	`g‘IpAddr
().
	`toSŒšg
(è+ 
	`Œ
(" æ”»å‡» "è+ 
de¡
->getIpAddr().toString());

151 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æŒ‡æ§ç›®æ ‡æˆ–å¯¹è±¡ä¸å­˜åœ¨ï¼"));

153 
	}
}

155 
	gMašWšdow
::
	$š™SûÃs
(
QSŒšg
 
´ofeP©h
)

157 
sûÃ
->
	`ş—r
();

158 
sûÃ
->
	`£tBuÎ‘I‹m
(
NULL
);

159 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

160 
ccObjeùLše
->
	`ş—r
();

161 
ccT¬g‘Lše
->
	`ş—r
();

162 
ccResuÉText
->
	`ş—r
();

163 
sûÃ
->
	`£tLaunch”
(
NULL
);

164 
sûÃ
->
	`£tT¬g‘
(
NULL
);

166 ià(
´ofeP©h
 !ğ
NULL
)

168 
QFe
 
	`fe
(
´ofeP©h
);

170 ià(!
fe
.
	`İ’
(
QIODeviû
::
R—dOÆy
))

172 
	`qDebug
()<<"Cª'ˆO³Àfe: "<<
´ofeP©h
;

176 
»ad”
.
	`£tDeviû
(&
fe
);

178 
»ad”
.
	`»adNext
();

179 !
»ad”
.
	`©End
())

181 ià(
»ad”
.
	`isS¹EËm’t
())

183 ià(
»ad”
.
	`Çme
() == "battlefield")

185 
	`»adB©eF›ld
();

189 
	`qDebug
()<<"Thi i nÙ‡ b©ef›ld…rofe: "<<
´ofeP©h
;

195 
»ad”
.
	`»adNext
();

200 
QP’
 
³n
;

201 
³n
.
	`£tCŞÜ
(
Qt
::
wh™e
);

202 
³n
.
	`£tC­StyË
(
Qt
::
RoundC­
);

203 
³n
.
	`£tJošStyË
(
Qt
::
RoundJoš
);

204 
³n
.
	`£tWidth
(1);

205 
sûÃ
->
	`addLše
(-300, 300, 300, 300, 
³n
);

206 
sûÃ
->
	`addLše
(-300, -300, -310, -280, 
³n
);

207 
sûÃ
->
	`addLše
(-300, -300, -290, -280, 
³n
);

208 
sûÃ
->
	`addLše
(-300, 0, -295, 0, 
³n
);

209 
sûÃ
->
	`addLše
(-300, 300, -300, -300, 
³n
);

210 
sûÃ
->
	`addLše
(300, 300, 280, 290, 
³n
);

211 
sûÃ
->
	`addLše
(300, 300, 280, 310, 
³n
);

212 
sûÃ
->
	`addLše
(0, 300, 0, 295, 
³n
);

214 
QG¿phicsTextI‹m
 *
‹xt1
 = \

215 
sûÃ
->
	`addText
(
	`Œ
("("è+ 
QSŒšg
::
	`numb”
(sûÃ->
	`g‘SimTİLeá
().
	`x
()) + \

216 
	`Œ
(","è+ 
QSŒšg
::
	`numb”
(
sûÃ
->
	`g‘SimBÙtomRight
().
	`y
()) + \

217 
	`Œ
(")"));

218 
‹xt1
->
	`£tPos
(-320, 300);

219 
‹xt1
->
	`£tDeçuÉTextCŞÜ
(
Qt
::
wh™e
);

221 
QG¿phicsTextI‹m
 *
‹xt2
 = \

222 
sûÃ
->
	`addText
(
	`Œ
("("è+ 
QSŒšg
::
	`numb”
(sûÃ->
	`g‘SimTİLeá
().
	`x
()) + \

223 
	`Œ
(","è+ 
QSŒšg
::
	`numb”
((
sûÃ
->
	`g‘SimTİLeá
().
	`y
() + \

224 
sûÃ
->
	`g‘SimBÙtomRight
().
	`y
())/2) + \

225 
	`Œ
(")"));

226 
‹xt2
->
	`£tPos
(-295, -10);

227 
‹xt2
->
	`£tDeçuÉTextCŞÜ
(
Qt
::
wh™e
);

229 
QG¿phicsTextI‹m
 *
‹xt3
 = 
sûÃ
->
	`addText
(
	`Œ
("("è+ 
QSŒšg
::
	`numb”
((sûÃ->
	`g‘SimTİLeá
().
	`x
() + \

230 
sûÃ
->
	`g‘SimBÙtomRight
().
	`x
())/2) + \

231 
	`Œ
(","è+ 
QSŒšg
::
	`numb”
(
sûÃ
->
	`g‘SimBÙtomRight
().
	`y
()) + \

232 
	`Œ
(")"));

233 
‹xt3
->
	`£tPos
(-25, 270);

234 
‹xt3
->
	`£tDeçuÉTextCŞÜ
(
Qt
::
wh™e
);

236 
QG¿phicsTextI‹m
 *
‹xt4
 = 
sûÃ
->
	`addText
(
QSŒšg
::
	`numb”
(sûÃ->
	`g‘SimHeight
()è+ 
	`Œ
(" m"));

237 
‹xt4
->
	`£tPos
(-290, -300);

238 
‹xt4
->
	`£tDeçuÉTextCŞÜ
(
Qt
::
wh™e
);

240 
QG¿phicsTextI‹m
 *
‹xt5
 = 
sûÃ
->
	`addText
(
QSŒšg
::
	`numb”
(sûÃ->
	`g‘SimWidth
()è+ 
	`Œ
(" m"));

241 
‹xt5
->
	`£tPos
(250, 270);

242 
‹xt5
->
	`£tDeçuÉTextCŞÜ
(
Qt
::
wh™e
);

243 
	}
}

246 
	gMašWšdow
::
	$»adB©eF›ld
()

248 
»ad”
.
	`»adNext
();

250 !
»ad”
.
	`©End
())

252 ià(
»ad”
.
	`isEndEËm’t
())

254 
»ad”
.
	`»adNext
();

257 ià(
»ad”
.
	`isS¹EËm’t
())

259 ià(
»ad”
.
	`Çme
() == "MapRange")

261 
QSŒšg
 
¿ngeSŒšg
 = 
»ad”
.
	`»adEËm’tText
();

262 
QSŒšgLi¡
 
¿ngeLi¡
 = 
¿ngeSŒšg
.
	`¥l™
(",", 
QSŒšg
::
SkEm±yP¬ts
);

263 ià(
¿ngeLi¡
.
	`couÁ
() == 4)

265 
sûÃ
->
	`£tSimRªge
(
	`QPoštF
(
¿ngeLi¡
.
	`©
(0).
	`toFlßt
(),\

266 
¿ngeLi¡
.
	`©
(1).
	`toFlßt
()),\

267 
	`QPoštF
(
¿ngeLi¡
.
	`©
(2).
	`toFlßt
(),\

268 
¿ngeLi¡
.
	`©
(3).
	`toFlßt
()));

272 
	`qDebug
()<<"Inv®id M­ Rªge: "<<
¿ngeSŒšg
;

275 ià(
»ad”
.
	`isEndEËm’t
())

277 
»ad”
.
	`»adNext
();

280 ià(
»ad”
.
	`Çme
() == "Node")

282 
	`»adNode
();

286 
	`skUnknownEËm’t
();

291 
»ad”
.
	`»adNext
();

294 
	}
}

297 
	gMašWšdow
::
	$»adNode
()

299 
»ad”
.
	`»adNext
();

300 
NodeI‹m
 *
node
 = 
Ãw
 NodeItem;

302 !
»ad”
.
	`©End
())

304 ià(
»ad”
.
	`isEndEËm’t
())

306 
»ad”
.
	`»adNext
();

309 ià(
»ad”
.
	`isS¹EËm’t
())

311 ià(
»ad”
.
	`Çme
() == "IP")

313 
QSŒšg
 
Addr
 = 
»ad”
.
	`»adEËm’tText
();

314 
node
->
	`£tIpAddr
(
Addr
);

316 ià(
»ad”
.
	`isEndEËm’t
())

318 
»ad”
.
	`»adNext
();

321 ià(
»ad”
.
	`Çme
() == "Location")

323 
QSŒšg
 
locSŒšg
 = 
»ad”
.
	`»adEËm’tText
();

324 
QSŒšgLi¡
 
locLi¡
 = 
locSŒšg
.
	`¥l™
(",", 
QSŒšg
::
SkEm±yP¬ts
);

325 ià(
locLi¡
.
	`couÁ
() == 3)

327 
q»®
 
Xcod
 = 
locLi¡
.
	`©
(0).
	`toFlßt
();

328 
q»®
 
Ycod
 = 
locLi¡
.
	`©
(1).
	`toFlßt
();

329 
q»®
 
Zcod
 = 
locLi¡
.
	`©
(2).
	`toFlßt
();

330 
node
->
	`£tCoÜid©e
(
Xcod
, 
Ycod
, 
Zcod
);

331 
node
->
	`£tPos
(600.0*(
Xcod
-
sûÃ
->
	`g‘SimTİLeá
().
	`x
())\

332 /(
sûÃ
->
	`g‘SimBÙtomRight
().
	`x
()-sûÃ->
	`g‘SimTİLeá
().x())-300.0,\

333 600.0*(
Ycod
-
sûÃ
->
	`g‘SimTİLeá
().
	`y
())\

334 /(
sûÃ
->
	`g‘SimBÙtomRight
().
	`y
()-sûÃ->
	`g‘SimTİLeá
().y())-300.0);

338 
	`qDebug
()<<"Inv®id LoÿtiÚ: "<<
locSŒšg
;

341 ià(
»ad”
.
	`isEndEËm’t
())

343 
»ad”
.
	`»adNext
();

346 ià(
»ad”
.
	`Çme
() == "Friendship")

348 
QSŒšg
 
ä›ndSŒšg
 = 
»ad”
.
	`»adEËm’tText
();

349 ià(
ä›ndSŒšg
 == "friend")

351 
node
->
	`£tNodeSh
(
FRIEND
);

353 ià(
ä›ndSŒšg
 == "neutral")

355 
node
->
	`£tNodeSh
(
NEUTRAL
);

357 ià(
ä›ndSŒšg
 == "enemy")

359 
node
->
	`£tNodeSh
(
ENEMY
);

362 ià(
»ad”
.
	`isEndEËm’t
())

364 
»ad”
.
	`»adNext
();

367 ià(
»ad”
.
	`Çme
() == "DestroyRate")

369 
node
->
	`£tDe¡royR©e
(
»ad”
.
	`»adEËm’tText
().
	`toFlßt
());

371 ià(
»ad”
.
	`isEndEËm’t
())

373 
»ad”
.
	`»adNext
();

376 ià(
»ad”
.
	`Çme
() == "Center")

378 
QSŒšg
 
æag
 = 
»ad”
.
	`»adEËm’tText
();

379 ià(
æag
 == "Yes")

381 
node
->
	`£tC’‹r
(
Œue
);

385 
node
->
	`£tC’‹r
(
çl£
);

388 ià(
»ad”
.
	`isEndEËm’t
())

390 
»ad”
.
	`»adNext
();

395 
	`skUnknownEËm’t
();

400 
»ad”
.
	`»adNext
();

403 
sûÃ
->
	`addI‹m
(
node
);

404 
node
->
	`£tToŞT
Òode->
	`g‘IpAddr
().
	`toSŒšg
());

405 
	}
}

408 
	gMašWšdow
::
	$skUnknownEËm’t
()

410 
»ad”
.
	`»adNext
();

411 !
»ad”
.
	`©End
())

413 ià(
»ad”
.
	`isEndEËm’t
())

415 
»ad”
.
	`»adNext
();

418 ià(
»ad”
.
	`isS¹EËm’t
())

420 
	`skUnknownEËm’t
();

424 
»ad”
.
	`»adNext
();

427 
	}
}

429 
	gMašWšdow
::
	$­³ndResuÉ
(
QSŒšg
 
s
)

431 
ccResuÉText
->
	`­³nd
(
s
);

432 
	}
}

434 
	gMašWšdow
::
	$checkS’d
()

436 if(!
cmdR‘
)

438 
ccResuÉText
->
	`­³nd
(
	`Œ
("æŒ‡æ§å‘½ä»¤å‘å¸ƒå¤±è´¥ï¼"));

439 
sûÃ
->
	`£tLaunch”
(
NULL
);

440 
sûÃ
->
	`£tT¬g‘
(
NULL
);

441 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

443 
£ndTim”
.
	`¡İ
();

444 
	}
}

446 
boŞ
 
	gMašWšdow
::
	$ev’tF‹r
(
QObjeù
 *
rg‘
, 
QEv’t
 *
ev’t
)

448 ià(
ev’t
->
	`ty³
(è=ğ
QEv’t
::
KeyP»ss
)

451 
QKeyEv’t
 *
keyEv’t
 = 
¡©ic_ÿ¡
 <QKeyEv’ˆ*> (
ev’t
);

453 ià(
keyEv’t
->
	`key
(è=ğ
Qt
::
Key_R‘uº
)

456 ià(
rg‘
 =ğ
ccObjeùLše
)

458 
NodeI‹m
 *
objeù
 = 
sûÃ
->
	`fšdNodeByIp
(
ccObjeùLše
->
	`‹xt
());

459 ià(
objeù
 !ğ
NULL
)

461 
sûÃ
->
	`£tLaunch”
(
objeù
);

462 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

463 
ccT¬g‘Lše
->
	`£tFocus
();

467 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æŒ‡æ§å¯¹è±¡ä¸å­˜åœ¨!"));

470 ià(
rg‘
 =ğ
ccT¬g‘Lše
)

472 
NodeI‹m
 *
rg‘
 = 
sûÃ
->
	`fšdNodeByIp
(
ccT¬g‘Lše
->
	`‹xt
());

473 ià(
rg‘
 !ğ
NULL
)

475 
sûÃ
->
	`£tT¬g‘
(
rg‘
);

476 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

477 
£ndBu‰Ú
->
	`£tFocus
();

481 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æ”»å‡»ç›®æ ‡ä¸å­˜åœ¨!"));

484 ià(
rg‘
 =ğ
£ndBu‰Ú
)

486 
	`£ndMsg
();

487 
ccObjeùLše
->
	`ş—r
();

488 
ccT¬g‘Lše
->
	`ş—r
();

490  
Œue
;

493  
QMašWšdow
::
	`ev’tF‹r
(
rg‘
, 
ev’t
);

494 
	}
}

496 
	gMašWšdow
::
	$ÿnûlS–eùiÚ
()

498 
sûÃ
->
	`£tLaunch”
(
NULL
);

499 
sûÃ
->
	`£tT¬g‘
(
NULL
);

500 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

501 
ccObjeùLše
->
	`ş—r
();

502 
ccT¬g‘Lše
->
	`ş—r
();

503 
	}
}

	@mainwindow.h

3 #iâdeà
MAINWINDOW_H


4 
	#MAINWINDOW_H


	)

6 
	~"node_™em.h
"

7 
	~"buÎ‘_™em.h
"

8 
	~"sim_sûÃ.h
"

9 
	~<QtN‘wÜk
>

11 şas 
	cMašWšdow
 : 
public
 
QMašWšdow


13 
Q_OBJECT


15 
public
:

16 
MašWšdow
();

17 ~
MašWšdow
();

20 
ü—‹M’us
();

23 
š™SûÃs
(
QSŒšg
 
´ofeP©h
);

24 
»adB©eF›ld
();

25 
»adM­Rªge
();

26 
»adNode
();

27 
skUnknownEËm’t
();

30 
£tObjeùIp
(
QSŒšg
 
s
);

31 
£tT¬g‘Ip
(
QSŒšg
 
s
);

32 
­³ndResuÉ
(
QSŒšg
 
s
);

35 
qšt64
 
g‘S’dMsg
(
£ndBufãr
[255],
QSŒšg
 
¡r
);

36 
IpToCh¬
(* 
pBufãr
,
Ën
,* 
Bufãr
);

37 
BEch¬TOdoubË
(
buf
[8]);

38 
pow”
(
x
 ,
n
);

39 
·r£RecvMsg
(
»cvBufãr
[255],
QHo¡Add»ss
 
addr
 );

40 
BštToCh¬
(
š‹r
,
buf
[4]);

43 
£ndMisse
();

45 
	m´Ùeùed
:

46 
boŞ
 
ev’tF‹r
(
QObjeù
 *, 
QEv’t
 *);

49 
public
 
	m¦Ùs
:

50 
¦ÙM­
();

51 
¦ÙProfe
();

52 
¦ÙEx™
();

54 
£ndMsg
();

55 
ÿnûlS–eùiÚ
();

56 
»c›veMsg
();

58 
checkS’d
();

60 
	m´iv©e
:

61 
QG¿phicsV›w
 *
§v›w
;

62 
SimSûÃ
 *
	msûÃ
;

64 
QLšeEd™
 *
	mccObjeùLše
;

65 
QLšeEd™
 *
	mccT¬g‘Lše
;

66 
QComboBox
 *
	mccTy³Combo
;

67 
QPushBu‰Ú
 *
	m£ndBu‰Ú
;

68 
QPushBu‰Ú
 *
	mÿnûlBu‰Ú
;

70 
QTextEd™
 *
	mccResuÉText
;

72 
QM’u
 *
	mfeM’u
;

73 
QAùiÚ
 *
	mm­AùiÚ
;

74 
QAùiÚ
 *
	m´ofeAùiÚ
;

75 
QAùiÚ
 *
	mex™AùiÚ
;

77 
QXmlSŒ—mR—d”
 
	m»ad”
;

79 
QUdpSock‘
 
	m»cvSock‘
;

80 
QUdpSock‘
 
	m£ndSock‘
;

82 
QTim”
 
	m£ndTim”
;

83 
boŞ
 
	mcmdR‘
;

	@moc_mainwindow.cpp

10 
	~"mašwšdow.h
"

11 #ià!
defšed
(
Q_MOC_OUTPUT_REVISION
)

13 #–ià
Q_MOC_OUTPUT_REVISION
 != 63

19 
QT_BEGIN_MOC_NAMESPACE


20 cÚ¡ 
ušt
 
	gqt_m‘a_d©a_MašWšdow
[] = {

45 cÚ¡ 
	gqt_m‘a_¡ršgd©a_MašWšdow
[] = {

51 
	gMašWšdow
::
qt_¡©ic_m‘aÿÎ
(
QObjeù
 *
_o
, 
QM‘aObjeù
::
C®l
 
_c
, 
_id
, **
_a
)

53 ià(
	g_c
 =ğ
QM‘aObjeù
::
InvokeM‘aM‘hod
) {

54 
Q_ASSERT
(
¡©icM‘aObjeù
.
ÿ¡
(
_o
));

55 
MašWšdow
 *
	g_t
 = 
¡©ic_ÿ¡
<MašWšdow *>(
_o
);

56 
	g_id
) {

57 0: 
_t
->
¦ÙM­
(); ;

58 1: 
_t
->
¦ÙProfe
(); ;

59 2: 
_t
->
¦ÙEx™
(); ;

60 3: 
_t
->
£ndMsg
(); ;

61 4: 
_t
->
ÿnûlS–eùiÚ
(); ;

62 5: 
_t
->
»c›veMsg
(); ;

63 6: 
_t
->
checkS’d
(); ;

67 
Q_UNUSED
(
_a
);

70 cÚ¡ 
QM‘aObjeùExŒaD©a
 
	gMašWšdow
::
¡©icM‘aObjeùExŒaD©a
 = {

71 0, 
qt_¡©ic_m‘aÿÎ


74 cÚ¡ 
QM‘aObjeù
 
	gMašWšdow
::
¡©icM‘aObjeù
 = {

75 { &
QMašWšdow
::
¡©icM‘aObjeù
, 
qt_m‘a_¡ršgd©a_MašWšdow
,

76 
qt_m‘a_d©a_MašWšdow
, &
¡©icM‘aObjeùExŒaD©a
 }

79 #ifdeà
Q_NO_DATA_RELOCATION


80 cÚ¡ 
	gQM‘aObjeù
 &
	gMašWšdow
::
	$g‘SticM‘aObjeù
(è{  
¡©icM‘aObjeù
; 
	}
}

83 cÚ¡ 
QM‘aObjeù
 *
	gMašWšdow
::
	$m‘aObjeù
() const

85  
QObjeù
::
d_±r
->
m‘aObjeù
 ? QObjeù::d_±r->m‘aObjeù : &
¡©icM‘aObjeù
;

86 
	}
}

88 *
	gMašWšdow
::
	$qt_m‘aÿ¡
(cÚ¡ *
_şÇme
)

90 ià(!
_şÇme
)  0;

91 ià(!
	`¡rcmp
(
_şÇme
, 
qt_m‘a_¡ršgd©a_MašWšdow
))

92  
¡©ic_ÿ¡
<*>(
cÚ¡_ÿ¡
< 
MašWšdow
*>(
this
));

93  
QMašWšdow
::
	`qt_m‘aÿ¡
(
_şÇme
);

94 
	}
}

96 
	gMašWšdow
::
qt_m‘aÿÎ
(
QM‘aObjeù
::
C®l
 
_c
, 
_id
, **
_a
)

98 
	g_id
 = 
QMašWšdow
::
qt_m‘aÿÎ
(
_c
, 
_id
, 
_a
);

99 ià(
	g_id
 < 0)

100  
	g_id
;

101 ià(
	g_c
 =ğ
QM‘aObjeù
::
InvokeM‘aM‘hod
) {

102 ià(
_id
 < 7)

103 
qt_¡©ic_m‘aÿÎ
(
this
, 
_c
, 
_id
, 
_a
);

104 
	g_id
 -= 7;

106  
	g_id
;

108 
	gQT_END_MOC_NAMESPACE


	@node_item.cpp

1 
	~"node_™em.h
"

2 
	~"sim_sûÃ.h
"

3 
	~"mašwšdow.h
"

5 
	gNodeI‹m
::
	$NodeI‹m
 (
QSŒšg
 

, 
q»®
 
x
, q»® 
y
, q»® 
z
, 
EÃmyA‰r
 
—
, 
boŞ
 
ù
)

7 
®ive
 = 
Œue
;

8 
de¡royR©e
 = 0.0;

9 
Addr
.
	`£tAdd»ss
(

);

10 
x_coÜdš©e
 = 
x
;

11 
y_coÜdš©e
 = 
y
;

12 
z_coÜdš©e
 = 
z
;

13 
nodesh
 = 
—
;

14 
ûÁ”
 = 
ù
;

15 
	}
}

17 
QReùF
 
	gNodeI‹m
::
	$boundšgReù
() const

19 ià(!
ûÁ”
)

21  
	`QReùF
(-10, -10, 20, 20);

25  
	`QReùF
(-20*
	`cos
(
PI
/10), -20, 40*cos(PI/10), 40+40*cos(PI/5));

27 
	}
}

29 
QPaš‹rP©h
 
	gNodeI‹m
::
	$sh­e
()

31 
QPaš‹rP©h
 
·th
;

32 ià(!
ûÁ”
){

33 
·th
.
	`addEÎ£
(
	`QPoštF
(0.0, 0.0), 10, 10);

37 
·th
.
	`moveTo
(-20*
	`cos
(
PI
/10), -20*
	`sš
(PI/10));

38 
·th
.
	`lšeTo
(20*
	`cos
(
PI
/10), -20*
	`sš
(PI/10));

39 
·th
.
	`lšeTo
(-20*
	`sš
(
PI
/5), 20*
	`cos
(PI/5));

40 
·th
.
	`lšeTo
(0.0f, -20.0f);

41 
·th
.
	`lšeTo
(20*
	`sš
(
PI
/5), 20*
	`cos
(PI/5));

42 
·th
.
	`lšeTo
(-20*
	`cos
(
PI
/10), -20*
	`sš
(PI/10));

43 
·th
.
	`£tFlRuË
(
Qt
::
WšdšgFl
);

45  
·th
;

46 
	}
}

48 
	gNodeI‹m
::
	$·št
(
QPaš‹r
 *
·š‹r
, cÚ¡ 
QStyËO±iÚG¿phicsI‹m
 *, 
QWidg‘
 *)

51 
QPixm­
 
pix
;

53 
SimSûÃ
 *
sûÃ
 = 
dyÇmic_ÿ¡
 <SimSûÃ *> (
this
->
	`sûÃ
());

55 ià(!
®ive
)

57 ià(
nodesh
 =ğ
ENEMY
)

59 
pix
.
	`lßd
("Icons/enemy_damage.png");

61 if(
nodesh
 =ğ
FRIEND
)

63 
pix
.
	`lßd
("Icons/friend_damage.png");

67 
pix
.
	`lßd
("Icons/neutral_damage.png");

70 
·š‹r
->
	`d¿wPixm­
(-15, -15, 30, 30, 
pix
);

72 ià(
sûÃ
->
	`g‘Launch”
(è=ğ
this
)

74 
pix
.
	`lßd
("Icons/attack.png");

75 
·š‹r
->
	`d¿wPixm­
(-10, -10, 20, 20, 
pix
);

77 ià(
sûÃ
->
	`g‘T¬g‘
(è=ğ
this
)

79 
pix
.
	`lßd
("Icons/target.png");

80 
·š‹r
->
	`d¿wPixm­
(-10, -10, 20, 20, 
pix
);

82 ià(
nodesh
 =ğ
ENEMY
)

84 
pix
.
	`lßd
("Icons/blue.png");

85 
·š‹r
->
	`d¿wPixm­
(-10, -10, 20, 20, 
pix
);

87 ià(
nodesh
 =ğ
FRIEND
)

89 ià(
ûÁ”
)

91 
pix
.
	`lßd
("Icons/star.png");

92 
·š‹r
->
	`d¿wPixm­
(-20, -20, 40, 40, 
pix
);

96 
bufãr
[
MAX_BUFF_LENGTH
];

97 
	`¥rštf
(
bufãr
,"Icons/red%d",1);

98 
pix
.
	`lßd
(
bufãr
);

100 
·š‹r
->
	`d¿wPixm­
(-10, -10, 20, 20, 
pix
);

105 
pix
.
	`lßd
("Icons/black.png");

106 
·š‹r
->
	`d¿wPixm­
(-10, -10, 20, 20, 
pix
);

108 
	}
}

110 
	gNodeI‹m
::
	$mou£P»ssEv’t
(
QG¿phicsSûÃMou£Ev’t
 *
ev’t
)

112 ià(!
®ive
)

117 
SimSûÃ
 *
sûÃ
 = 
dyÇmic_ÿ¡
<SimSûÃ *> (
this
->
	`sûÃ
());

118 
MašWšdow
 *
mw
 = 
dyÇmic_ÿ¡
<MašWšdow *> (
this
->
	`sûÃ
()->
	`·»Á
());

120 ià(
ev’t
->
	`bu‰Ú
(è=ğ
Qt
::
LeáBu‰Ú
)

122 ià(
ûÁ”
)

124 
QMes§geBox
::
	`w¬nšg
(
mw
, 
QObjeù
::
	`Œ
("è­¦å‘Š"), QObject::tr("æ§åˆ¶ä¸­å¿ƒæ— æ³•è¿›è¡Œæ”»å‡»ï¼"));

127 
sûÃ
->
	`£tLaunch”
(
this
);

128 
mw
->
	`£tObjeùIp
(
Addr
.
	`toSŒšg
());

130 ià(
ev’t
->
	`bu‰Ú
(è=ğ
Qt
::
RightBu‰Ú
)

132 ià(
ûÁ”
)

134 
QMes§geBox
::
	`w¬nšg
(
mw
, 
QObjeù
::
	`Œ
("è­¦å‘Š"), QObject::tr("æ§åˆ¶ä¸­å¿ƒæ— æ³•è¢«æ”»å‡»ï¼"));

137 
sûÃ
->
	`£tT¬g‘
(
this
);

138 
mw
->
	`£tT¬g‘Ip
(
Addr
.
	`toSŒšg
());

140 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

141 
	}
}

143 
	gNodeI‹m
::
	$ty³
() const

145  
U£rTy³
+1;

146 
	}
}

148 
boŞ
 
	gNodeI‹m
::
	$judgeDamage
()

150 
q»®
 
¿‹
 = 
this
->
de¡royR©e
;

151 
q»®
 
rNum
 = 
	`q¿nd
() % 100;

153 ià(
rNum
 <ğ
¿‹
 * 100)

155  
Œue
;

159  
çl£
;

161 
	}
}

	@node_item.h

3 #iâdeà
NODE_ITEM_H


4 
	#NODE_ITEM_H


	)

6 
	~<QtGui
>

7 
	~<QtN‘wÜk/QHo¡Add»ss
>

9 
	#PI
 3.141592653

	)

12 
	#MAX_BUFF_LENGTH
 200

	)

15 
	eEÃmyA‰r


17 
	mFRIEND
,

18 
	mENEMY
,

19 
	mNEUTRAL


22 şas 
	cNodeI‹m
 : 
public
 
QG¿phicsI‹m


24 
public
:

25 
NodeI‹m
(
QSŒšg
 

 = "0.0.0.0", 
q»®
 
x
 = 0.0, q»® 
y
 = 0.0, q»® 
z
 = 0.0, \

26 
EÃmyA‰r
 
—
 = 
FRIEND
, 
boŞ
 
ù
 = 
çl£
);

29 
boŞ
 
judgeDamage
();

32 
EÃmyA‰r
 
	$g‘NodeSh
()

34  
this
->
nodesh
;

38 
	$£tNodeSh
(
EÃmyA‰r
 
—
)

40 
nodesh
 = 
—
;

41 
	}
}

44 
boŞ
 
	$isAlive
()

46  
this
->
®ive
;

47 
	}
}

50 
	$£tDamaged
()

52 
this
->
®ive
 = 
çl£
;

53 
	}
}

56 
QHo¡Add»ss
 
	$g‘IpAddr
()

58  
this
->
Addr
;

59 
	}
}

62 
	$£tIpAddr
(
QSŒšg
 

)

64 
Addr
.
	`£tAdd»ss
(

);

65 
	}
}

68 
q»®
 
	$g‘XCoÜdš©e
()

70  
this
->
x_coÜdš©e
;

71 
	}
}

74 
q»®
 
	$g‘YCoÜdš©e
()

76  
this
->
y_coÜdš©e
;

77 
	}
}

80 
q»®
 
	$g‘ZCoÜdš©e
()

82  
this
->
z_coÜdš©e
;

83 
	}
}

86 
	$£tCoÜid©e
(
q»®
 
x
, q»® 
y
, q»® 
z
)

88 
this
->
x_coÜdš©e
 = 
x
;

89 
this
->
y_coÜdš©e
 = 
y
;

90 
this
->
z_coÜdš©e
 = 
z
;

91 
	}
}

94 
	$g‘De¡royR©e
()

96  
this
->
de¡royR©e
;

97 
	}
}

100 
	$£tDe¡royR©e
(
q»®
 
¿‹
){

101 
de¡royR©e
 = 
¿‹
;

102 
	}
}

105 
	$£tC’‹r
(
boŞ
 
ù
)

107 
this
->
ûÁ”
 = 
ù
;

108 
	}
}

111 
boŞ
 
	$isC’‹r
()

113  
this
->
ûÁ”
;

114 
	}
}

117 
	$ty³
() const;

120 
QReùF
 
	$boundšgReù
() const;

122 
´Ùeùed
:

124 
	`·št
(
QPaš‹r
 *, cÚ¡ 
QStyËO±iÚG¿phicsI‹m
 *, 
QWidg‘
 *);

127 
	`mou£P»ssEv’t
(
QG¿phicsSûÃMou£Ev’t
 *
ev’t
);

130 
QPaš‹rP©h
 
	`sh­e
();

132 
´iv©e
:

133 
q»®
 
x_coÜdš©e
;

134 
q»®
 
y_coÜdš©e
;

135 
q»®
 
z_coÜdš©e
;

136 
QHo¡Add»ss
 
Addr
;

137 
boŞ
 
®ive
;

138 
EÃmyA‰r
 
nodesh
;

139 
q»®
 
de¡royR©e
;

140 
boŞ
 
ûÁ”
;

141 
	}
};

	@parseRecvMsg.cpp

1 
	~"mašwšdow.h
"

5 
	gMašWšdow
::
	$·r£RecvMsg
(
»cvBufãr
[],
QHo¡Add»ss
 
addr
)

26 
xcod
,
ycod
 ;

27 
‹mpBufãrX
[8];

28 
‹mpBufãrY
[8];

29 
‹mpBufãrZ
[8];

30 
qušt16
 
ty³
;

31 
»suÉ
;

37 
ty³
 = 
	`qušt16
 (
»cvBufãr
[34] + (recvBuffer[33] << 8));

40 
»suÉ
 = 
»cvBufãr
[35];

43 
	`memıy
(
‹mpBufãrX
,
»cvBufãr
+36,8);

46 
	`memıy
(
‹mpBufãrY
,
»cvBufãr
+44,8);

49 
	`memıy
(
‹mpBufãrZ
,
»cvBufãr
+52,8);

51 
NodeI‹m
 *
node
 = 
Ãw
 
	`NodeI‹m
();

52 
ty³
)

58 
xcod
 = 
	`BEch¬TOdoubË
(
‹mpBufãrX
);

61 
ycod
 = 
	`BEch¬TOdoubË
(
‹mpBufãrY
);

68 
node
 = 
sûÃ
->
	`fšdNodeByIp
(
addr
.
	`toSŒšg
());

69 ià(
node
 =ğ
NULL
)

76 ià(!
node
->
	`isAlive
())

79 
node
->
	`£tPos
(
sûÃ
->
	`width
()*(
xcod
-sûÃ->
	`g‘SimTİLeá
().
	`x
())\

80 /(
sûÃ
->
	`g‘SimBÙtomRight
().
	`x
()-sûÃ->
	`g‘SimTİLeá
().x())-sûÃ->
	`width
()/2,\

81 
sûÃ
->
	`height
()*(
ycod
-sûÃ->
	`g‘SimTİLeá
().
	`y
())\

82 /(
sûÃ
->
	`g‘SimBÙtomRight
().
	`y
()-sûÃ->
	`g‘SimTİLeá
().y())-sûÃ->
	`height
()/2);

87 
»suÉ
)

92 
cmdR‘
 = 
Œue
;

93 
	`£ndMisse
();

101 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),tr("æŒ‡æ§ç»“æœç±»å‹é”™è¯¯!"));

106 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),tr("æ¥æ”¶ä¿¡æ¯ç±»å‹é”™è¯¯!"));

110 
	}
}

	@recieveMsg.cpp

1 
	~"mašwšdow.h
"

3 
	gMašWšdow
::
	$»c›veMsg
()

5 
»cvBufãr
[255];

6 
qušt64
 
maxSize
 = 255;

7 
QHo¡Add»ss
 
addr
;

8 
qušt16
 
pÜt
;

11 
	`mem£t
(
»cvBufãr
,0,(recvBuffer));

14 
»cvSock‘
.
	`hasP’dšgD©ag¿ms
())

16 
»cvSock‘
.
	`»adD©ag¿m
((*)
»cvBufãr
,
maxSize
,&
addr
,&
pÜt
);

20 
	`·r£RecvMsg
(
»cvBufãr
,
addr
);

21 
	}
}

	@sendMsg.cpp

1 
	~"mašwšdow.h
"

2 
	gMašWšdow
::
	$£ndMsg
()

4 
qšt64
 
size
;

5 
£ndBufãr
[255];

6 
i
 = 0;

9 
NodeI‹m
 *
¤c
 = 
sûÃ
->
	`fšdNodeByIp
(
ccObjeùLše
->
	`‹xt
());

10 
NodeI‹m
 *
de¡
 = 
sûÃ
->
	`fšdNodeByIp
(
ccT¬g‘Lše
->
	`‹xt
());

12 if(
¤c
 =ğ
NULL
)

14 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æŒ‡æ§å¯¹è±¡ä¸å­˜åœ¨ï¼"));

17 if(
de¡
 =ğ
NULL
)

19 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æ”»å‡»ç›®æ ‡ä¸å­˜åœ¨ï¼"));

22 ià(!
de¡
->
	`isAlive
())

24 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æ”»å‡»ç›®æ ‡å·²è¢«æ‘§æ¯ã€‚"));

27 ià(
¤c
->
	`g‘NodeSh
(è=ğ
ENEMY
)

29 
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æŒ‡æ§å¯¹è±¡ä¸ºæ•Œæ–¹é˜µè¥ï¼Œä¸å¯æ“æ§ï¼"));

32 ià(
de¡
->
	`g‘NodeSh
(è=ğ
FRIEND
)

34 ià(
QMes§geBox
::
	`w¬nšg
(
this
, 
	`Œ
("è­¦å‘Š"),r("æ”»å‡»ç›®æ ‡ä¸ºçº¢å†›ï¼Œæ˜¯å¦ç¡®å®š?"), \

35 
QMes§geBox
::
No
|QMes§geBox::
Yes
)\

36 =ğ
QMes§geBox
::
No
)

42 
sûÃ
->
	`£tLaunch”
(
¤c
);

43 
sûÃ
->
	`£tT¬g‘
(
de¡
);

44 
sûÃ
->
	`upd©e
(sûÃ->
	`v›wReù
());

47 
QSŒšg
 
¡r
 = 
de¡
->
	`g‘IpAddr
().
	`toSŒšg
();

49 
	`mem£t
(
£ndBufãr
,0,(sendBuffer));

52 
size
 = 
	`g‘S’dMsg
(
£ndBufãr
,
¡r
);

54 
£ndTim”
.
	`¡¬t
(2000);

57  
i
 = 0; i < 1; i++)

59 
£ndSock‘
.
	`wr™eD©ag¿m
(
£ndBufãr
,
size
,
	`QHo¡Add»ss
(
¤c
->
	`g‘IpAddr
().
	`toSŒšg
()),5555);

62 
	}
}

	@sim_scene.cpp

1 
	~"sim_sûÃ.h
"

3 
	gSimSûÃ
::
	$SimSûÃ
(
QSŒšg
 
s
, 
QObjeù
 *
·»Á
è: 
	$QG¿phicsSûÃ
(
·»Á
)

5 
bgP©h
 = 
s
;

6 
buÎ‘
 = 
NULL
;

7 
simWidth
 = 
simHeight
 = 0.0;

8 
Ïunch”
 = 
rg‘
 = 
NULL
;

9 
	`q¤ªd
(
QTime
::
	`cu¼’tTime
().
	`m£c
());

10 
	}
}

12 
	gSimSûÃ
::
	$d¿wBackground
(
QPaš‹r
 *
·š‹r
, cÚ¡ 
QReùF
 &)

14 
QPixm­
 
m­
;

15 if(!
m­
.
	`lßd
(
bgP©h
))

19 
·š‹r
->
	`d¿wPixm­
(
	`v›wReù
(), 
m­
, m­.
	`»ù
());

20 
	}
}

22 
NodeI‹m
* 
	gSimSûÃ
::
	$fšdNodeByIp
(
QSŒšg
 
SŒ
)

26 
QLi¡
 <
QG¿phicsI‹m
 *> 
nodeLi¡
 = 
	`™ems
();

28 
couÁ
 = 
nodeLi¡
.
	`couÁ
();

30 
i
 = 0; i < 
couÁ
; i++)

32 
NodeI‹m
 *
node
 = (NodeI‹m *)(
nodeLi¡
.
	`©
(
i
));

35 ià(
node
->
	`ty³
(è=ğ
QG¿phicsI‹m
::
U£rTy³
 + 1)

37 ià(
node
->
	`g‘IpAddr
().
	`toSŒšg
(è=ğ
SŒ
)

40  
node
;

45  
NULL
;

46 
	}
}

	@sim_scene.h

3 #iâdeà
SIM_SCENE_H


4 
	#SIM_SCENE_H


	)

6 
	~"buÎ‘_™em.h
"

7 
	~"node_™em.h
"

9 şas 
	cSimSûÃ
 : 
public
 
QG¿phicsSûÃ


11 
public
:

12 
SimSûÃ
(
QSŒšg
 
s
, 
QObjeù
 *
·»Á
 = 0);

15 
NodeI‹m
 *
fšdNodeByIp
(
QSŒšg
 
SŒ
);

18 
	$£tBuÎ‘I‹m
(
BuÎ‘I‹m
 *
buÎ‘™em
)

20 
buÎ‘
 = 
buÎ‘™em
;

24 
BuÎ‘I‹m
* 
	$g‘BuÎ‘I‹m
()

26  
this
->
buÎ‘
;

27 
	}
}

30 
QSŒšg
 
	$g‘BgP©h
()

32  
bgP©h
;

33 
	}
}

36 
	$£tBgP©h
(
QSŒšg
 
·th
)

38 
bgP©h
 = 
·th
;

39 
	}
}

42 
	$£tSimRªge
(
QPoštF
 

, QPoštF 
br
)

44 
TİLeá
 = 

;

45 
BÙtomRight
 = 
br
;

46 
simWidth
 = 
	`çbsf
(
BÙtomRight
.
	`x
(è- 
TİLeá
.x());

47 
simHeight
 = 
	`çbsf
(
BÙtomRight
.
	`y
(è- 
TİLeá
.y());

48 
	}
}

51 
q»®
 
	$g‘SimWidth
()

53  
this
->
simWidth
;

54 
	}
}

57 
q»®
 
	$g‘SimHeight
()

59  
this
->
simHeight
;

60 
	}
}

63 
QPoštF
 
	$g‘SimTİLeá
()

65  
this
->
TİLeá
;

66 
	}
}

69 
QPoštF
 
	$g‘SimBÙtomRight
()

71  
this
->
BÙtomRight
;

72 
	}
}

75 
	$£tLaunch”
(
NodeI‹m
 *
node
)

77 
this
->
Ïunch”
 = 
node
;

78 
	}
}

81 
	$£tT¬g‘
(
NodeI‹m
 *
node
)

83 
this
->
rg‘
 = 
node
;

84 
	}
}

87 
NodeI‹m
* 
	$g‘Launch”
()

89  
this
->
Ïunch”
;

90 
	}
}

93 
NodeI‹m
* 
	$g‘T¬g‘
()

95  
this
->
rg‘
;

96 
	}
}

99 
QReùF
 
	$v›wReù
()

101  
	`QReùF
(-
	`v›ws
().
	`©
(0)->
	`v›wpÜt
()->
	`width
()/2, \

102 -
	`v›ws
().
	`©
(0)->
	`v›wpÜt
()->
	`height
()/2, \

103 
	`v›ws
().
	`©
(0)->
	`v›wpÜt
()->
	`width
(), \

104 
	`v›ws
().
	`©
(0)->
	`v›wpÜt
()->
	`height
());

105 
	}
}

107 
	g´Ùeùed
:

109 
d¿wBackground
(
QPaš‹r
 *
·š‹r
, cÚ¡ 
QReùF
 &);

111 
	g´iv©e
:

112 
NodeI‹m
 *
Ïunch”
;

113 
NodeI‹m
 *
	grg‘
;

114 
QPoštF
 
	gTİLeá
;

115 
QPoštF
 
	gBÙtomRight
;

116 
q»®
 
	gsimWidth
;

117 
q»®
 
	gsimHeight
;

118 
BuÎ‘I‹m
 *
	gbuÎ‘
;

119 
QSŒšg
 
	gbgP©h
;

	@/usr/include/math.h

25 #iâdef 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/huge_v®.h
>

35 #ifdeà
__USE_ISOC99


36 
	~<b™s/huge_v®f.h
>

37 
	~<b™s/huge_v®l.h
>

40 
	~<b™s/šf.h
>

43 
	~<b™s/Çn.h
>

47 
	~<b™s/m©hdef.h
>

54 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

56 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

57 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

58 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

59 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

61 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

62 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

63 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

64 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

65 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

67 
	#_MdoubË_
 

	)

68 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

69 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<b™s/m©hÿÎs.h
>

72 #undeà
_MdoubË_


73 #undeà
_MdoubË_BEGIN_NAMESPACE


74 #undeà
_MdoubË_END_NAMESPACE


75 #undeà
__MATH_PRECNAME


77 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


83 #iâdeà
_Mæßt_


84 
	#_Mæßt_
 

	)

86 
	#_MdoubË_
 
_Mæßt_


	)

87 #ifdeà
__STDC__


88 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
f
 
	)
r

92 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<b™s/m©hÿÎs.h
>

95 #undeà
_MdoubË_


96 #undeà
_MdoubË_BEGIN_NAMESPACE


97 #undeà
_MdoubË_END_NAMESPACE


98 #undeà
__MATH_PRECNAME


100 #ià(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

102 || 
defšed
 
__LDBL_COMPAT
)

103 #ifdeà
__LDBL_COMPAT


105 #ifdeà
__USE_ISOC99


106 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

107 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

108 #ifdeà
__REDIRECT_NTH


109 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

110 
__Ædbl_Ãx‰ow¬df
)

111 
	`__©Œibu‹__
 ((
__cÚ¡__
));

112 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

113 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

114 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

115 (
__x
, 
__y
),

116 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

121 #ià
defšed
 
__LDBL_COMPAT
 || defšed 
__NO_LONG_DOUBLE_MATH


123 #undeà
__MATHDECL_1


124 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

125 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

126 
¬gs
, 
®Ÿs
)

	)

127 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

128 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

134 #iâdeà
_MlÚg_doubË_


135 
	#_MlÚg_doubË_
 

	)

137 
	#_MdoubË_
 
_MlÚg_doubË_


	)

138 #ifdeà
__STDC__


139 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

141 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
l
 
	)
r

143 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

144 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

145 
	#__MATH_DECLARE_LDOUBLE
 1

	)

146 
	~<b™s/m©hÿÎs.h
>

147 #undeà
_MdoubË_


148 #undeà
_MdoubË_BEGIN_NAMESPACE


149 #undeà
_MdoubË_END_NAMESPACE


150 #undeà
__MATH_PRECNAME


155 #undeà
__MATHDECL_1


156 #undeà
__MATHDECL


157 #undeà
__MATHCALL


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


162 
signgam
;

167 #ifdeà
__USE_ISOC99


205 
FP_NAN
,

206 
	#FP_NAN
 
FP_NAN


	)

207 
FP_INFINITE
,

208 
	#FP_INFINITE
 
FP_INFINITE


	)

209 
FP_ZERO
,

210 
	#FP_ZERO
 
FP_ZERO


	)

211 
FP_SUBNORMAL
,

212 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

213 
FP_NORMAL


214 
	#FP_NORMAL
 
FP_NORMAL


	)

218 #ifdeà
__NO_LONG_DOUBLE_MATH


219 
	#åşassify
(
x
) \

220 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

222 
	#åşassify
(
x
) \

223 ( (
x
) ==  () \

224 ? 
	`__åşassifyf
 (
x
) \

225 :  (
x
) ==  () \

226 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

230 #ifdeà
__NO_LONG_DOUBLE_MATH


231 
	#signb™
(
x
) \

232 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

234 
	#signb™
(
x
) \

235 ( (
x
) ==  () \

236 ? 
	`__signb™f
 (
x
) \

237 :  (
x
) ==  () \

238 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

242 #ifdeà
__NO_LONG_DOUBLE_MATH


243 
	#isfš™e
(
x
) \

244 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

246 
	#isfš™e
(
x
) \

247 ( (
x
) ==  () \

248 ? 
	`__fš™ef
 (
x
) \

249 :  (
x
) ==  () \

250 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

254 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

258 #ifdeà
__NO_LONG_DOUBLE_MATH


259 
	#i¢ª
(
x
) \

260 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

262 
	#i¢ª
(
x
) \

263 ( (
x
) ==  () \

264 ? 
	`__i¢ªf
 (
x
) \

265 :  (
x
) ==  () \

266 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

270 #ifdeà
__NO_LONG_DOUBLE_MATH


271 
	#isšf
(
x
) \

272 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

274 
	#isšf
(
x
) \

275 ( (
x
) ==  () \

276 ? 
	`__isšff
 (
x
) \

277 :  (
x
) ==  () \

278 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

282 
	#MATH_ERRNO
 1

	)

283 
	#MATH_ERREXCEPT
 2

	)

288 #iâdeà
__FAST_MATH__


289 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

294 #ifdef 
__USE_MISC


298 
_IEEE_
 = -1,

299 
_SVID_
,

300 
_XOPEN_
,

301 
_POSIX_
,

302 
_ISOC_


303 } 
	t_LIB_VERSION_TYPE
;

308 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

312 #ifdeà
__USE_SVID


318 #ifdeà
__ılu¥lus


319 
__exû±iÚ


321 
exû±iÚ


324 
ty³
;

325 *
Çme
;

326 
¬g1
;

327 
¬g2
;

328 
»tv®
;

329 
	}
};

331 #ifdeà
__ılu¥lus


332 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

334 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

337 
	#X_TLOSS
 1.41484755040568800000e+16

	)

340 
	#DOMAIN
 1

	)

341 
	#SING
 2

	)

342 
	#OVERFLOW
 3

	)

343 
	#UNDERFLOW
 4

	)

344 
	#TLOSS
 5

	)

345 
	#PLOSS
 6

	)

348 
	#HUGE
 3.40282347e+38F

	)

352 #ifdeà
__USE_XOPEN


354 
	#MAXFLOAT
 3.40282347e+38F

	)

361 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


362 
	#M_E
 2.7182818284590452354

	)

363 
	#M_LOG2E
 1.4426950408889634074

	)

364 
	#M_LOG10E
 0.43429448190325182765

	)

365 
	#M_LN2
 0.69314718055994530942

	)

366 
	#M_LN10
 2.30258509299404568402

	)

367 
	#M_PI
 3.14159265358979323846

	)

368 
	#M_PI_2
 1.57079632679489661923

	)

369 
	#M_PI_4
 0.78539816339744830962

	)

370 
	#M_1_PI
 0.31830988618379067154

	)

371 
	#M_2_PI
 0.63661977236758134308

	)

372 
	#M_2_SQRTPI
 1.12837916709551257390

	)

373 
	#M_SQRT2
 1.41421356237309504880

	)

374 
	#M_SQRT1_2
 0.70710678118654752440

	)

380 #ifdeà
__USE_GNU


381 
	#M_El
 2.7182818284590452353602874713526625L

	)

382 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

383 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

384 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

385 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

386 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

387 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

388 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

389 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

390 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

391 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

392 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

393 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

400 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


401 
	#__NO_MATH_INLINES
 1

	)

404 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

411 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

412 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

413 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

414 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

415 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

416 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

420 #ifdeà
__USE_EXTERN_INLINES


421 
	~<b™s/m©hšlše.h
>

426 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

427 
	~<b™s/m©h-fš™e.h
>

430 #ifdeà
__USE_ISOC99


434 #iâdeà
isg»©”


435 
	#isg»©”
(
x
, 
y
) \

436 (
__ex‹nsiÚ__
 \

437 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

438 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

442 #iâdeà
isg»©”equ®


443 
	#isg»©”equ®
(
x
, 
y
) \

444 (
__ex‹nsiÚ__
 \

445 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

446 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

450 #iâdeà
i¦ess


451 
	#i¦ess
(
x
, 
y
) \

452 (
__ex‹nsiÚ__
 \

453 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

454 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

458 #iâdeà
i¦es£qu®


459 
	#i¦es£qu®
(
x
, 
y
) \

460 (
__ex‹nsiÚ__
 \

461 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

462 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

466 #iâdeà
i¦essg»©”


467 
	#i¦essg»©”
(
x
, 
y
) \

468 (
__ex‹nsiÚ__
 \

469 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

470 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

474 #iâdeà
isunÜd”ed


475 
	#isunÜd”ed
(
u
, 
v
) \

476 (
__ex‹nsiÚ__
 \

477 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

478 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

483 
	g__END_DECLS


	@/usr/include/features.h

20 #iâdef 
_FEATURES_H


21 
	#_FEATURES_H
 1

	)

98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_POSIX


101 #undeà
__USE_POSIX2


102 #undeà
__USE_POSIX199309


103 #undeà
__USE_POSIX199506


104 #undeà
__USE_XOPEN


105 #undeà
__USE_XOPEN_EXTENDED


106 #undeà
__USE_UNIX98


107 #undeà
__USE_XOPEN2K


108 #undeà
__USE_XOPEN2KXSI


109 #undeà
__USE_XOPEN2K8


110 #undeà
__USE_XOPEN2K8XSI


111 #undeà
__USE_LARGEFILE


112 #undeà
__USE_LARGEFILE64


113 #undeà
__USE_FILE_OFFSET64


114 #undeà
__USE_BSD


115 #undeà
__USE_SVID


116 #undeà
__USE_MISC


117 #undeà
__USE_ATFILE


118 #undeà
__USE_GNU


119 #undeà
__USE_REENTRANT


120 #undeà
__USE_FORTIFY_LEVEL


121 #undeà
__FAVOR_BSD


122 #undeà
__KERNEL_STRICT_NAMES


126 #iâdeà
_LOOSE_KERNEL_NAMES


127 
	#__KERNEL_STRICT_NAMES


	)

131 
	#__USE_ANSI
 1

	)

140 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


141 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

142 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

144 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

149 #ià
defšed
 
_BSD_SOURCE
 && \

150 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

151 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

152 
	#__FAVOR_BSD
 1

	)

156 #ifdeà
_GNU_SOURCE


157 #undeà
_ISOC95_SOURCE


158 
	#_ISOC95_SOURCE
 1

	)

159 #undeà
_ISOC99_SOURCE


160 
	#_ISOC99_SOURCE
 1

	)

161 #undeà
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #undeà
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #undeà
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #undeà
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #undeà
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #undeà
_BSD_SOURCE


172 
	#_BSD_SOURCE
 1

	)

173 #undeà
_SVID_SOURCE


174 
	#_SVID_SOURCE
 1

	)

175 #undeà
_ATFILE_SOURCE


176 
	#_ATFILE_SOURCE
 1

	)

181 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

182 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

183 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

184 
	#_BSD_SOURCE
 1

	)

185 
	#_SVID_SOURCE
 1

	)

192 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

193 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

194 
	#__USE_ISOC99
 1

	)

198 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

199 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

200 
	#__USE_ISOC95
 1

	)

205 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

206 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

207 
	#_POSIX_SOURCE
 1

	)

208 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

209 
	#_POSIX_C_SOURCE
 2

	)

210 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

211 
	#_POSIX_C_SOURCE
 199506L

	)

212 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

213 
	#_POSIX_C_SOURCE
 200112L

	)

215 
	#_POSIX_C_SOURCE
 200809L

	)

217 
	#__USE_POSIX_IMPLICITLY
 1

	)

220 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


221 
	#__USE_POSIX
 1

	)

224 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


225 
	#__USE_POSIX2
 1

	)

228 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

229 
	#__USE_POSIX199309
 1

	)

232 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

233 
	#__USE_POSIX199506
 1

	)

236 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

237 
	#__USE_XOPEN2K
 1

	)

238 #undeà
__USE_ISOC95


239 
	#__USE_ISOC95
 1

	)

240 #undeà
__USE_ISOC99


241 
	#__USE_ISOC99
 1

	)

244 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

245 
	#__USE_XOPEN2K8
 1

	)

246 #undeà
_ATFILE_SOURCE


247 
	#_ATFILE_SOURCE
 1

	)

250 #ifdef 
_XOPEN_SOURCE


251 
	#__USE_XOPEN
 1

	)

252 #ià(
_XOPEN_SOURCE
 - 0) >= 500

253 
	#__USE_XOPEN_EXTENDED
 1

	)

254 
	#__USE_UNIX98
 1

	)

255 #undeà
_LARGEFILE_SOURCE


256 
	#_LARGEFILE_SOURCE
 1

	)

257 #ià(
_XOPEN_SOURCE
 - 0) >= 600

258 #ià(
_XOPEN_SOURCE
 - 0) >= 700

259 
	#__USE_XOPEN2K8
 1

	)

260 
	#__USE_XOPEN2K8XSI
 1

	)

262 
	#__USE_XOPEN2K
 1

	)

263 
	#__USE_XOPEN2KXSI
 1

	)

264 #undeà
__USE_ISOC95


265 
	#__USE_ISOC95
 1

	)

266 #undeà
__USE_ISOC99


267 
	#__USE_ISOC99
 1

	)

270 #ifdeà
_XOPEN_SOURCE_EXTENDED


271 
	#__USE_XOPEN_EXTENDED
 1

	)

276 #ifdeà
_LARGEFILE_SOURCE


277 
	#__USE_LARGEFILE
 1

	)

280 #ifdeà
_LARGEFILE64_SOURCE


281 
	#__USE_LARGEFILE64
 1

	)

284 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

285 
	#__USE_FILE_OFFSET64
 1

	)

288 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


289 
	#__USE_MISC
 1

	)

292 #ifdef 
_BSD_SOURCE


293 
	#__USE_BSD
 1

	)

296 #ifdef 
_SVID_SOURCE


297 
	#__USE_SVID
 1

	)

300 #ifdef 
_ATFILE_SOURCE


301 
	#__USE_ATFILE
 1

	)

304 #ifdef 
_GNU_SOURCE


305 
	#__USE_GNU
 1

	)

308 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


309 
	#__USE_REENTRANT
 1

	)

312 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

313 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

314 #ià
_FORTIFY_SOURCE
 > 1

315 
	#__USE_FORTIFY_LEVEL
 2

	)

317 
	#__USE_FORTIFY_LEVEL
 1

	)

320 
	#__USE_FORTIFY_LEVEL
 0

	)

324 
	~<b™s/´edefs.h
>

327 
	#__STDC_ISO_10646__
 200009L

	)

335 #undeà
__GNU_LIBRARY__


336 
	#__GNU_LIBRARY__
 6

	)

340 
	#__GLIBC__
 2

	)

341 
	#__GLIBC_MINOR__
 15

	)

343 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

344 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

347 #ià
defšed
 
__GNUC__
 \

348 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

349 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

350 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

351 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

355 #iâdeà
__ASSEMBLER__


356 #iâdeà
_SYS_CDEFS_H


357 
	~<sys/cdefs.h
>

362 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


363 
	#__USE_LARGEFILE
 1

	)

364 
	#__USE_LARGEFILE64
 1

	)

370 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

371 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

372 && 
defšed
 
	g__ex‹º_šlše


373 
	#__USE_EXTERN_INLINES
 1

	)

378 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

379 && (
defšed
 
	g_LIBC
 || !defšed 
	g__OPTIMIZE_SIZE__
è&& !defšed 
	g__NO_INLINE__
 \

380 && 
defšed
 
	g__ex‹º_šlše


381 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

389 
	~<gnu/¡ubs.h
>

	@
1
.
1
/usr/include
24
415
BEcharToDouble.cpp
IpToChar.cpp
RealNode_Qt/Message.cpp
RealNode_Qt/Message.h
RealNode_Qt/Position.cpp
RealNode_Qt/Position.h
RealNode_Qt/RealNode.cpp
RealNode_Qt/RealNode.h
bullet_item.cpp
bullet_item.h
getSendMsg.cpp
main.cpp
mainwindow.cpp
mainwindow.h
moc_mainwindow.cpp
node_item.cpp
node_item.h
parseRecvMsg.cpp
recieveMsg.cpp
sendMsg.cpp
sim_scene.cpp
sim_scene.h
/usr/include/math.h
/usr/include/features.h
